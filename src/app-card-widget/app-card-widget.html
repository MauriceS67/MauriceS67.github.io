<html><head></head><body><div hidden="" by-polymer-bundler=""><link rel="import" href="../../bower_components/bbx-card-widget/bbx-card-widget.html"><dom-module id="app-badge" assetpath="../app-badge/"><template><style>:host{display:inline-block}.badge{display:inline;background:var(--app-badge-bg,#f1f1f1);color:var(--app-badge-color,inherit);padding:var(--app-badge-padding,10%);margin:var(--app-badge-margin,0 7%);border-radius:var(--app-badge-radius,4px);border:var(--app-badge-border,thin solid #ccc)}</style><div class="badge" inner-h-t-m-l="[[badge]]"></div></template><script>Polymer({is:"app-badge",properties:{badge:{type:String}}});</script></dom-module></div><dom-module id="app-card-widget"><template><bbx-card-widget id="widget" uid="{{uid}}" parent="{{parent}}" edit-mode="{{editMode}}" editable="{{editable}}" loading="{{loading}}" tracks="{{tracks}}" sortable="{{sortable}}" model="{{model}}" name="{{name}}" label="{{label}}" desc="{{desc}}" icon="{{icon}}" params="{{params}}" language="{{language}}"></bbx-card-widget></template><script>Polymer({is:"app-card-widget",behaviors:[BBX.Dashboard.CardWidgetBehavior,App.WidgetBehavior],getButtonIndex:function(e){return _.findIndex(this.params.buttons,function(t){return t.source==e})},putWidgetInLoadingState:function(t){var e=this.getButtonIndex(t);this._updateParams("params.buttons."+e+".label",'<spinkit-element name="three-bounce" size="24" color="#333" active></spinkit-element>')},isValidCache:function(t){if(!t.hasOwnProperty("label"))return!1;var e=this.getButtonIndex(t.dataID);return t.label===this.params.buttons[e].label},updateFromCache:function(t){var e=this.getButtonIndex(t.dataID);t.hasOwnProperty("label")?this._updateParams("params.buttons."+e+".label",t.label):this.update(t)},update:function(t){var e=this.getButtonIndex(t.dataID);return this._updateParams("params.buttons."+e+".label",this.params.buttons[e].name+"("+t.valueFormated+")"),t.label=this.params.buttons[e].label,t},nameChanged:function(t){var e=this.$.widget;this.unlisten(e,"action-button-tap","_onButtonTabListener"),this.listen(e,"action-button-tap","_onButtonTabListener"),this.unlisten(e,"featured-button-tap","_onFeaturedButtonTapListener"),this.listen(e,"featured-button-tap","_onFeaturedButtonTapListener")},_onButtonTabListener:function(t){var e=t.detail.model,a=this.details[e.source];if(Number(a.value)<1)return!1;this.redirectToGrid(a.bcName,a._filter)},_onFeaturedButtonTapListener:function(t){var e;e=this.params.featuredButton.hasOwnProperty("bc")?this.params.featuredButton.bc:_.values(this.params.bc)[0].SOURCEBC,bcNameMap=_.invert(this.config.api.BCNameMapping)[e];var a=JSON.parse(JSON.stringify(this.params._filter)),n=JSON.parse(JSON.stringify(this.params.filter)),i=_.omit(_.extend(n,a),function(t,e){return"object"==typeof t});i._bc=bcNameMap,i._id="";var r="/grid/"+e+"/form";this.fire("switch-to",[r,i])}});</script></dom-module></body></html>