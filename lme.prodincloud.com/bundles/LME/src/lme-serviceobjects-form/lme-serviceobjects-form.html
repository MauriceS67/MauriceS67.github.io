<html><head></head><body><div hidden="" by-polymer-bundler=""><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.datepicker=vaadin.elements.datepicker||{},vaadin.elements.datepicker.DatePickerHelper={_getISOWeekNumber:function(e){var t=e.getDay();0===t&&(t=7);var a=4-t,n=new Date(e.getTime()+24*a*3600*1e3),i=new Date(0,0);i.setFullYear(n.getFullYear());var r=n.getTime()-i.getTime(),l=Math.round(r/864e5);return Math.floor(l/7+1)},_dateEquals:function(e,t){return e instanceof Date&&t instanceof Date&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},_dateAllowed:function(e,t,a){return(!t||t<=e)&&(!a||e<=a)},_getClosestDate:function(a,e){return e.filter(function(e){return void 0!==e}).reduce(function(e,t){return t?e?Math.abs(a.getTime()-t.getTime())<Math.abs(e.getTime()-a.getTime())?t:e:t:e})}};</script><dom-module id="vaadin-month-calendar" assetpath="../../../../bower_components/vaadin-date-picker/"><template><style>:host{display:block;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font:inherit;@apply (--paper-font-common-base);@apply (--vaadin-date-picker-calendar);}#title{color:var(--primary-text-color);text-align:center;padding:6px 0;@apply (--paper-font-subhead);@apply (--vaadin-date-picker-calendar-title);}#monthGrid{display:flex;flex-wrap:wrap}#monthGrid div{text-align:center;width:calc(14.285714286% - 2px);margin:0 1px;box-sizing:border-box;padding:6px 0;@apply (--paper-font-body1);@apply (--vaadin-date-picker-calendar-cell);}:host([week-numbers]) #monthGrid div{width:calc(12.5% - 2px)}#monthGrid div:not(:empty){cursor:pointer;color:var(--primary-text-color);@apply (--vaadin-date-picker-calendar-date-cell);}#monthGrid div:not(:empty):not([disabled]):not(.weekday):not(.weeknumber):active{background:var(--light-primary-color);border-radius:2px}#monthGrid div.weekday{text-transform:uppercase;color:var(--secondary-text-color);cursor:default;padding:8px 0;@apply (--paper-font-caption);@apply (--vaadin-date-picker-calendar-weekday-cell);}#monthGrid div.weekday:empty,#monthGrid div.weeknumber{width:calc(10% - 2px);padding-right:1.25%}#monthGrid div[today]{position:relative;color:var(--primary-color);@apply (--vaadin-date-picker-calendar-cell-today);}#monthGrid div[today][selected]{@apply (--vaadin-date-picker-calendar-cell-today-selected);}#monthGrid div[focused]{background:var(--light-primary-color);box-sizing:border-box;border-radius:2px;@apply (--vaadin-date-picker-calendar-cell-focused);}:host([focused]) #monthGrid div[focused]{background:var(--primary-color);color:var(--primary-background-color);@apply (--vaadin-date-picker-calendar-focused-cell-focused);}#monthGrid div[selected]{font-weight:600;@apply (--vaadin-date-picker-calendar-cell-selected);}#monthGrid div[today][selected]{@apply (--vaadin-date-picker-calendar-cell-today-selected);}#monthGrid div[disabled]{opacity:.3;cursor:default;@apply (--vaadin-date-picker-calendar-cell-disabled);}#monthGrid div.weeknumber{cursor:default;color:rgba(0,0,0,.4);@apply (--paper-font-caption);@apply (--vaadin-date-picker-calendar-weeknumber-cell);}</style><div id="title" role="heading">[[_getTitle(month, i18n.monthNames)]]</div><div id="monthGrid" on-tap="_handleTap" on-touchend="_preventDefault" on-touchstart="_onMonthGridTouchStart"><template is="dom-repeat" items="[[_getWeekDayNames(i18n.weekdays, i18n.weekdaysShort, showWeekNumbers, i18n.firstDayOfWeek)]]"><div class="weekday" role="heading" aria-label$="[[item.weekDay]]">[[item.weekDayShort]]</div></template><template is="dom-repeat" items="[[_days]]"><template is="dom-if" if="[[_showWeekSeparator(showWeekNumbers, i18n.firstDayOfWeek, index)]]"><div class="weeknumber" role="heading" aria-label$="[[i18n.week]] [[_getWeekNumber(item, _days)]]">[[_getWeekNumber(item, _days)]]</div></template><div today$="[[_isToday(item)]]" selected$="[[_dateEquals(item, selectedDate)]]" focused$="[[_dateEquals(item, focusedDate)]]" date="[[item]]" disabled$="[[!_dateAllowed(item, minDate, maxDate)]]" role$="[[_getRole(item)]]" aria-label$="[[_getAriaLabel(item)]]" aria-disabled$="[[_getAriaDisabled(item, minDate, maxDate)]]">[[_getDate(item)]]</div></template></div></template><script>Polymer({is:"vaadin-month-calendar",properties:{month:{type:Date,value:new Date},selectedDate:{type:Date,notify:!0},focusedDate:Date,showWeekNumbers:{type:Boolean,value:!1},i18n:{type:Object},ignoreTaps:Boolean,_notTapping:Boolean,minDate:{type:Date,value:null},maxDate:{type:Date,value:null},_days:{type:Array,computed:"_getDays(month, i18n.firstDayOfWeek, minDate, maxDate)"}},observers:["_showWeekNumbersChanged(showWeekNumbers, i18n.firstDayOfWeek)"],_getTitle:function(e,t){return this.i18n.formatTitle(t[e.getMonth()],e.getFullYear())},_dateEquals:vaadin.elements.datepicker.DatePickerHelper._dateEquals,_onMonthGridTouchStart:function(){this._notTapping=!1,this.async(function(){this._notTapping=!0},300)},_dateAdd:function(e,t){e.setDate(e.getDate()+t)},_applyFirstDayOfWeek:function(e,t){return e.slice(t).concat(e.slice(0,t))},_getWeekDayNames:function(e,a,t,n){return e=this._applyFirstDayOfWeek(e,n),a=this._applyFirstDayOfWeek(a,n),e=e.map(function(e,t){return{weekDay:e,weekDayShort:a[t]}}),t&&1===n&&e.unshift({weekDay:"",weekDayShort:""}),e},_getDate:function(e){return e?e.getDate():""},_showWeekNumbersChanged:function(e,t){this.toggleAttribute("week-numbers",e&&1===t)},_showWeekSeparator:function(e,t,a){return e&&1===t&&a%7==0},_isToday:function(e){return this._dateEquals(new Date,e)},_getDays:function(e,t){var a=new Date(0,0);for(a.setFullYear(e.getFullYear()),a.setMonth(e.getMonth()),a.setDate(1);a.getDay()!==t;)this._dateAdd(a,-1);for(var n=[],i=a.getMonth(),r=e.getMonth();a.getMonth()===r||a.getMonth()===i;)n.push(a.getMonth()===r?new Date(a.getTime()):null),this._dateAdd(a,1);return n},_getWeekNumber:function(e,t){return e=e||t.reduce(function(e,t){return!e&&t?t:e}),vaadin.elements.datepicker.DatePickerHelper._getISOWeekNumber(e)},_handleTap:function(e){this.ignoreTaps||this._notTapping||!e.target.date||e.target.hasAttribute("disabled")||(this.selectedDate=e.target.date,this.fire("date-tap"))},_preventDefault:function(e){e.preventDefault()},_dateAllowed:vaadin.elements.datepicker.DatePickerHelper._dateAllowed,_getRole:function(e){return e?"button":"presentational"},_getAriaLabel:function(e){if(!e)return"";var t=this._getDate(e)+" "+this.i18n.monthNames[e.getMonth()]+" "+e.getFullYear()+", "+this.i18n.weekdays[e.getDay()];return this._isToday(e)&&(t+=", "+this.i18n.today),t},_getAriaDisabled:function(e,t,a){return this._dateAllowed(e,t,a)?"false":"true"}});</script></dom-module><dom-module id="vaadin-infinite-scroller" assetpath="../../../../bower_components/vaadin-date-picker/"><template><style>:host{display:block;overflow:hidden;height:500px}#scroller{position:relative;height:100%;overflow:auto;outline:0;margin-right:-40px;-webkit-overflow-scrolling:touch;-ms-overflow-style:none;overflow-x:hidden}#scroller.notouchscroll{-webkit-overflow-scrolling:auto}#scroller::-webkit-scrollbar{display:none}.buffer{position:absolute;width:100%;box-sizing:border-box;padding-right:40px;@apply (--vaadin-infinite-scroller-buffer);}:host(:not([init-animation-done])) .buffer>*{animation:fadein .2s}@keyframes fadein{from{opacity:0}to{opacity:1}}</style><div id="scroller"><div class="buffer"></div><div class="buffer"></div><div id="fullHeight"></div></div></template></dom-module><script>Polymer({is:"vaadin-infinite-scroller",behaviors:[Polymer.Templatizer],properties:{itemHeight:{type:Number,value:50},bufferSize:{type:Number,value:20},_initialScroll:{value:5e5},_initialIndex:{value:0},_buffers:Array,_preventScrollEvent:Boolean,_bufferHeight:Number,_mayHaveMomentum:Boolean,_initialized:Boolean,active:Boolean},observers:["_activated(active)"],_activated:function(t){t&&!this._initialized&&(this._createPool(),this._initialized=!0)},listeners:{animationend:"_animationEnd"},_animationEnd:function(){this.toggleAttribute("init-animation-done",!0)},_finishInit:function(){this._initDone||(this._buffers.forEach(function(t){[].forEach.call(t.children,function(t){this._ensureStampedInstance(t)}.bind(this))},this),this._buffers[0].translateY||this._reset(),this._initDone=!0)},ready:function(){this._bufferHeight=this.itemHeight*this.bufferSize,this._buffers=Polymer.dom(this.root).querySelectorAll(".buffer"),this.$.fullHeight.style.height=2*this._initialScroll+"px";var t=Polymer.dom(this).querySelector("template");this.templatize(t),-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&(this.$.scroller.tabIndex=-1)},_translateBuffer:function(t){var i=t?1:0;this._buffers[i].translateY=this._buffers[i?0:1].translateY+this._bufferHeight*(i?-1:1),this.transform("translate3d(0, "+this._buffers[i].translateY+"px, 0)",this._buffers[i]),this._buffers[i].updated=!1,this._buffers.reverse()},_scroll:function(){var t=this.$.scroller.scrollTop;(t<this._bufferHeight||t>2*this._initialScroll-this._bufferHeight)&&(this._initialIndex=~~this.position,this._reset());var i=this.$$(".buffer").offsetTop,e=t>this._buffers[1].translateY+this.itemHeight+i,s=t<this._buffers[0].translateY+this.itemHeight+i;(e||s)&&(this._translateBuffer(s),this._updateClones()),this._preventScrollEvent||(this.fire("custom-scroll",void 0,{bubbles:!1}),this._mayHaveMomentum=!0),this._preventScrollEvent=!1,this.debounce("scrollFinish",function(){var t=this.$.scroller.getBoundingClientRect();this._isVisible(this._buffers[0],t)||this._isVisible(this._buffers[1],t)||(this.position=this.position)},200)},set position(t){this._preventScrollEvent=!0,t>this._firstIndex&&t<this._firstIndex+2*this.bufferSize?this.$.scroller.scrollTop=this.itemHeight*(t-this._firstIndex)+this._buffers[0].translateY:(this._initialIndex=~~t,this._reset(),this.unlisten(this.$.scroller,"scroll","_scroll"),this.$.scroller.scrollTop+=t%1*this.itemHeight,this.listen(this.$.scroller,"scroll","_scroll")),this._mayHaveMomentum&&(this.$.scroller.classList.add("notouchscroll"),this._mayHaveMomentum=!1,this.async(function(){this.$.scroller.classList.remove("notouchscroll")},10))},get position(){return(this.$.scroller.scrollTop-this._buffers[0].translateY)/this.itemHeight+this._firstIndex},_reset:function(){this.unlisten(this.$.scroller,"scroll","_scroll"),this.$.scroller.scrollTop=this._initialScroll,this._buffers[0].translateY=this._initialScroll-this._bufferHeight,this._buffers[1].translateY=this._initialScroll,this._buffers.forEach(function(t){Polymer.Base.transform("translate3d(0, "+t.translateY+"px, 0)",t)}),this._buffers[0].updated=this._buffers[1].updated=!1,this._updateClones(!0),this.debounce("updateAllClones",function(){this._buffers[0].updated=this._buffers[1].updated=!1,this._updateClones()},200),this.listen(this.$.scroller,"scroll","_scroll")},_createPool:function(){var s=this.getBoundingClientRect();this._buffers.forEach(function(t){for(var i=0;i<this.bufferSize;i++){var e=document.createElement("div");e.style.height=this.itemHeight+"px",e.instance={},Polymer.dom(t).appendChild(e),this.async(function(t,i){this._isVisible(t,i)&&this._ensureStampedInstance(t)}.bind(this,e,s),1),Polymer.RenderStatus.afterNextRender(e,this._finishInit.bind(this))}},this)},_ensureStampedInstance:function(i){if(!i.firstElementChild){var e=i.instance;i.instance=this.stamp({}),Polymer.dom(i).appendChild(i.instance.root),Object.keys(e).forEach(function(t){i.instance[t]=e[t]})}},_updateClones:function(s){this._firstIndex=~~((this._buffers[0].translateY-this._initialScroll)/this.itemHeight)+this._initialIndex;var n=s?this.$.scroller.getBoundingClientRect():void 0;this._buffers.forEach(function(t,i){if(!t.updated){var e=this._firstIndex+this.bufferSize*i;[].forEach.call(t.children,function(t,i){s&&!this._isVisible(t,n)||(t.instance.index=e+i)}.bind(this)),t.updated=!0}},this)},_isVisible:function(t,i){var e=t.getBoundingClientRect();return e.bottom>i.top&&e.top<i.bottom},_forwardParentProp:function(i,e){"index"!==i&&this._buffers.forEach(function(t){[].forEach.call(t.children,function(t){t.instance[i]=e})})},_forwardParentPath:function(i,e){"index"!==i&&this._buffers.forEach(function(t){[].forEach.call(t.children,function(t){t.instance.notifyPath(i,e,!0)})})}});</script><iron-iconset-svg size="24" name="vaadin-date-picker"><svg><defs><g id="chevron-right"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></g><g id="clear"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g><g id="event"><path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"></path></g></defs></svg></iron-iconset-svg><dom-module id="vaadin-date-picker-overlay" assetpath="../../../../bower_components/vaadin-date-picker/"><template><style>:host{display:flex;flex-direction:column;height:100%;width:100%;background:var(--primary-background-color);font:inherit;outline:0;@apply (--paper-font-common-base);@apply (--shadow-elevation-2dp);@apply (--vaadin-date-picker-overlay);}#toolbar{display:flex;justify-content:space-between;padding:14px;background:var(--primary-background-color);z-index:2;@apply (--paper-font-button);@apply (--shadow-elevation-2dp);flex-shrink:0;transform:translateZ(0);color:var(--primary-color);@apply (--vaadin-date-picker-toolbar);}#toolbar:not([desktop]){cursor:pointer}#toolbar iron-icon{fill:var(--primary-color);padding:0;transition:transform .2s;will-change:transform;--iron-icon-width:20px;--iron-icon-height:20px;@apply (--vaadin-date-picker-toolbar-icon);}#toolbar iron-icon[rotate]{transform:rotate(180deg)}#toolbar iron-icon[hidden]{display:none}#scrollers{display:flex;flex-direction:row;height:100%;width:100%;position:relative;overflow:hidden}#scrollers #fade{pointer-events:none;display:block;background:linear-gradient(90deg,var(--primary-background-color),rgba(255,255,255,0));width:50px;position:absolute;height:100%;z-index:1;transform:translateX(-100%);@apply (--vaadin-date-picker-scrollers-fade);}#scrollers[desktop] #fade{display:none}#scroller,#yearScroller{height:100%}#scroller{padding:0 8px;position:absolute;top:0;left:0;right:0;bottom:0}#scrollers[desktop] #scroller{right:50px;transform:none!important}#yearScroller{text-align:center;width:50px;background:var(--dark-theme-background-color);color:var(--dark-theme-secondary-color);cursor:pointer;position:absolute;right:0;transform:translateX(100%);-webkit-tap-highlight-color:transparent;@apply (--paper-font-menu);@apply (--vaadin-date-picker-yearscroller);}#yearScroller div{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#scrollers[desktop] #yearScroller{position:absolute;transform:none!important}#yearScroller{--vaadin-infinite-scroller-buffer:{top:50%;margin-top:-12px;width:90px};}#yearScroller::before{content:'';display:block;background:0 0;width:0;height:0;position:absolute;left:0;top:50%;margin-top:-6px;border-width:6px;border-style:solid;border-color:transparent;border-left-color:var(--primary-background-color);@apply (--vaadin-date-picker-yearscroller-indicator);}:host(.animate) vaadin-infinite-scroller{transition:all .2s}:host(:not([fullscreen])) #header{display:none}#toolbar[desktop]{display:none}#header{background:var(--primary-color);padding:0 14px 14px;display:flex;flex-shrink:0;height:64px;box-sizing:border-box;@apply (--paper-font-subhead);@apply (--shadow-elevation-2dp);@apply (--vaadin-date-picker-header);}#header input,#header label{color:var(--dark-theme-text-color)}#header iron-icon{color:var(--dark-theme-text-color);cursor:pointer}#toggle{align-self:flex-end}#header paper-input-container{flex:1;margin-right:24px;padding-bottom:0;--paper-input-container-underline:{display:none};--paper-input-container-underline-focus:{display:block;background:var(--dark-theme-text-color);-webkit-transform:none;transform:none};}#clear{display:none}#clear[showclear]{display:flex}#footer{display:flex;justify-content:space-between;padding:4px;@apply (--paper-font-body2);background:var(--primary-background-color);z-index:2;box-shadow:0 -1px 4px 0 rgba(0,0,0,.5);color:var(--primary-color);flex-shrink:0;@apply (--vaadin-date-picker-footer);}paper-button.keyboard-focus{color:var(--primary-background-color);background:var(--primary-color);outline:0}#announcer{display:inline-block;position:fixed;clip:rect(0,0,0,0);clip-path:inset(100%)}</style><div id="announcer" role="alert" aria-live="polite">[[i18n.calendar]]</div><div id="header" on-touchend="_preventDefault" aria-hidden="true"><paper-input-container><label>[[label]]</label><input id="input" readonly="" is="iron-input" autocomplete="off" bind-value="[[_formatDisplayed(selectedDate, i18n.formatDate)]]"><iron-icon id="clear" suffix="" on-tap="_clear" icon="vaadin-date-picker:clear" showclear$="[[_showClear(selectedDate)]]"></iron-icon></paper-input-container><iron-icon id="toggle" icon="vaadin-date-picker:event" on-tap="_cancel"></iron-icon></div><div id="toolbar" desktop$="[[_desktopMode]]" on-tap="_toggleYearScroller" aria-hidden="true">[[_yearAfterXMonths(_visibleMonthIndex)]]<iron-icon rotate$="[[_isYearScrollerVisible(_translateX)]]" icon="vaadin-date-picker:chevron-right"></iron-icon></div><div id="scrollers" desktop$="[[_desktopMode]]" on-track="_track"><div id="fade"></div><vaadin-infinite-scroller id="scroller" on-custom-scroll="_onMonthScroll" on-touchstart="_onMonthScrollTouchStart" item-height="250" buffer-size="6" active="[[initialPosition]]"><template><vaadin-month-calendar i18n="[[i18n]]" month="[[_dateAfterXMonths(index)]]" selected-date="{{selectedDate}}" focused-date="[[focusedDate]]" ignore-taps="[[_ignoreTaps]]" show-week-numbers="[[showWeekNumbers]]" min-date="[[minDate]]" max-date="[[maxDate]]" focused$="[[_focused]]"></vaadin-month-calendar></template></vaadin-infinite-scroller><vaadin-infinite-scroller id="yearScroller" on-tap="_onYearTap" on-custom-scroll="_onYearScroll" on-touchstart="_onYearScrollTouchStart" item-height="80" buffer-size="25" active="[[initialPosition]]"><template><div role="button">[[_yearAfterXYears(index)]]</div><div style="font-size:18px;line-height:56px;opacity:.3" aria-hidden="true">•</div></template></vaadin-infinite-scroller></div><div id="footer" on-touchend="_preventDefault" role="toolbar"><paper-button id="todayButton" disabled="[[!_isTodayAllowed(minDate, maxDate)]]" on-tap="_onTodayTap">[[i18n.today]]</paper-button><paper-button id="cancelButton" on-tap="_cancel">[[i18n.cancel]]</paper-button></div><iron-media-query query="(min-width: 375px)" query-matches="{{_desktopMode}}"></iron-media-query></template><script>Polymer({is:"vaadin-date-picker-overlay",listeners:{keydown:"_onKeydown",tap:"_stopPropagation",focus:"_onOverlayFocus",blur:"_onOverlayBlur"},hostAttributes:{tabIndex:"0"},properties:{selectedDate:{type:Date,notify:!0},focusedDate:{type:Date,notify:!0,observer:"_focusedDateChanged"},_focusedMonthDate:Number,initialPosition:{type:Date,observer:"_initialPositionChanged"},_originDate:{value:new Date},_visibleMonthIndex:Number,_desktopMode:Boolean,_translateX:{observer:"_translateXChanged"},_yearScrollerWidth:{value:50},i18n:{type:Object},showWeekNumbers:{type:Boolean},_ignoreTaps:Boolean,_notTapping:Boolean,minDate:Date,maxDate:Date,_focused:Boolean},attached:function(){this._translateX=this._yearScrollerWidth,this.toggleClass("animate",!0),this.setScrollDirection("y",this.$.scrollers),Polymer.IronA11yAnnouncer.requestAvailability()},announceFocusedDate:function(){var t=this._currentlyFocusedDate(),e=[];vaadin.elements.datepicker.DatePickerHelper._dateEquals(t,new Date)&&e.push(this.i18n.today),e=e.concat([this.i18n.weekdays[t.getDay()],t.getDate(),this.i18n.monthNames[t.getMonth()],t.getFullYear()]),this.showWeekNumbers&&1===this.i18n.firstDayOfWeek&&(e.push(this.i18n.week),e.push(vaadin.elements.datepicker.DatePickerHelper._getISOWeekNumber(t))),this.fire("iron-announce",{text:e.join(" ")})},focusCancel:function(){this.$.cancelButton.focus()},scrollToDate:function(t,e){this._scrollToPosition(this._differenceInMonths(t,this._originDate),e)},_focusedDateChanged:function(t){this.revealDate(t)},revealDate:function(t){if(t){var e=this._differenceInMonths(t,this._originDate),i=this.$.scroller.position>e,s=this.$.scroller.clientHeight/this.$.scroller.itemHeight,o=this.$.scroller.position+s-1<e;i?this._scrollToPosition(e,!0):o&&this._scrollToPosition(e-s+1,!0)}},_onOverlayFocus:function(){this._focused=!0},_onOverlayBlur:function(){this._focused=!1},_initialPositionChanged:function(t){this.scrollToDate(t)},_repositionYearScroller:function(){this._visibleMonthIndex=Math.floor(this.$.scroller.position),this.$.yearScroller.position=(this.$.scroller.position+this._originDate.getMonth())/12},_repositionMonthScroller:function(){this.$.scroller.position=12*this.$.yearScroller.position-this._originDate.getMonth(),this._visibleMonthIndex=Math.floor(this.$.scroller.position)},_onMonthScroll:function(){this._repositionYearScroller(),this._doIgnoreTaps()},_onYearScroll:function(){this._repositionMonthScroller(),this._doIgnoreTaps()},_onYearScrollTouchStart:function(){this._notTapping=!1,this.async(function(){this._notTapping=!0},300),this._repositionMonthScroller()},_onMonthScrollTouchStart:function(){this._repositionYearScroller()},_doIgnoreTaps:function(){this._ignoreTaps=!0,this.debounce("restore-taps",function(){this._ignoreTaps=!1},300)},_formatDisplayed:function(t,e){if(t)return e(t)},_onTodayTap:function(){var t=new Date;this.$.scroller.position===this._differenceInMonths(t,this._originDate)?(this.selectedDate=t,this._close()):this._scrollToCurrentMonth()},_scrollToCurrentMonth:function(){this.focusedDate&&(this.focusedDate=new Date),this.scrollToDate(new Date,!0)},_showClear:function(t){return null!==t},_onYearTap:function(t){if(!this._ignoreTaps&&!this._notTapping){var e=(t.detail.y-(this.$.yearScroller.getBoundingClientRect().top+this.$.yearScroller.clientHeight/2))/this.$.yearScroller.itemHeight;this._scrollToPosition(this.$.scroller.position+12*e,!0)}},_scrollToPosition:function(t,e){if(void 0===this._targetPosition){if(!e)return this.$.scroller.position=t,this._targetPosition=void 0,void this._repositionYearScroller();this._targetPosition=t;var s=e?300:0,o=0,a=this.$.scroller.position,n=function(t){var e=t-(o=o||t);if(e<s){var i=function(t,e,i,s){return(t/=s/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}(e,a,this._targetPosition-a,s);this.$.scroller.position=i,window.requestAnimationFrame(n)}else this.fire("scroll-animation-finished",{position:this._targetPosition,oldPosition:a}),this.$.scroller.position=this._targetPosition,this._targetPosition=void 0;this.async(this._repositionYearScroller,1)}.bind(this);window.requestAnimationFrame(n)}else this._targetPosition=t},_limit:function(t,e){return Math.min(e.max,Math.max(e.min,t))},_handleTrack:function(t){if(!(Math.abs(t.detail.dx)<10||10<Math.abs(t.detail.ddy))){Math.abs(t.detail.ddx)>this._yearScrollerWidth/3&&this.toggleClass("animate",!0);var e=this._translateX+t.detail.ddx;this._translateX=this._limit(e,{min:0,max:this._yearScrollerWidth})}},_track:function(t){if(!this._desktopMode)switch(t.detail.state){case"start":this.toggleClass("animate",!1);break;case"track":this._handleTrack(t);break;case"end":this.toggleClass("animate",!0),this._translateX>=this._yearScrollerWidth/2?this._closeYearScroller():this._openYearScroller()}},_toggleYearScroller:function(){this._isYearScrollerVisible()?this._closeYearScroller():this._openYearScroller()},_openYearScroller:function(){this._translateX=0},_closeYearScroller:function(){this._translateX=this._yearScrollerWidth},_isYearScrollerVisible:function(){return this._translateX<this._yearScrollerWidth/2},_translateXChanged:function(t){this._desktopMode||(this.transform("translateX("+(t-this._yearScrollerWidth)+"px)",this.$.scroller),this.transform("translateX("+t+"px)",this.$.yearScroller),this.transform("translateX("+-t+"px)",this.$.fade))},_yearAfterXYears:function(t){var e=new Date(this._originDate);return e.setFullYear(parseInt(t)+this._originDate.getFullYear()),e.getFullYear()},_yearAfterXMonths:function(t){return this._dateAfterXMonths(t).getFullYear()},_dateAfterXMonths:function(t){var e=new Date(this._originDate);return e.setDate(1),e.setMonth(parseInt(t)+this._originDate.getMonth()),e},_differenceInMonths:function(t,e){return 12*(t.getFullYear()-e.getFullYear())-e.getMonth()+t.getMonth()},_differenceInYears:function(t,e){return this._differenceInMonths(t,e)/12},_clear:function(){this.selectedDate="",this._close()},_close:function(){this.fire("close")},_cancel:function(){this.focusedDate=this.selectedDate,this._close()},_preventDefault:function(t){t.preventDefault()},_eventKey:function(t){for(var e=["down","up","right","left","enter","space","home","end","pageup","pagedown","tab"],i=0;i<e.length;i++){var s=e[i];if(Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(t,s))return s}},_onKeydown:function(t){var e=this._currentlyFocusedDate(),i=this._eventKey(t);if("tab"===i)t.stopPropagation(),this.hasAttribute("fullscreen")?t.preventDefault():this.$.cancelButton.focused&&!t.shiftKey||this._focused&&t.shiftKey?(t.preventDefault(),this.fire("focus-input")):this.async(function(){this._focused&&this.revealDate(this.focusedDate)},1);else if(i)switch(t.preventDefault(),t.stopPropagation(),i){case"down":this._moveFocusByDays(7),this.focus();break;case"up":this._moveFocusByDays(-7),this.focus();break;case"right":this._buttonFocused()||this._moveFocusByDays(1);break;case"left":this._buttonFocused()||this._moveFocusByDays(-1);break;case"enter":this._buttonFocused()||this._close();break;case"space":var s=this.focusedDate;vaadin.elements.datepicker.DatePickerHelper._dateEquals(s,this.selectedDate)?(this.selectedDate="",this.focusedDate=s):this.selectedDate=s;break;case"home":this._moveFocusInsideMonth(e,"minDate");break;case"end":this._moveFocusInsideMonth(e,"maxDate");break;case"pagedown":this._moveFocusByMonths(t.shiftKey?12:1);break;case"pageup":this._moveFocusByMonths(t.shiftKey?-12:-1)}},_buttonFocused:function(){return this.$.todayButton.focused||this.$.cancelButton.focused},_currentlyFocusedDate:function(){return this.focusedDate||this.selectedDate||this.initialPosition||new Date},_moveFocusByDays:function(t){var e=this._currentlyFocusedDate(),i=new Date(0,0);i.setFullYear(e.getFullYear()),i.setMonth(e.getMonth()),i.setDate(e.getDate()+t),this._dateAllowed(i,this.minDate,this.maxDate)?(this.focusedDate=i,this._focusedMonthDate=this.focusedDate.getDate()):this._dateAllowed(e,this.minDate,this.maxDate)?0<t?(this.focusedDate=this.maxDate,this._focusedMonthDate=this.maxDate.getDate()):(this.focusedDate=this.minDate,this._focusedMonthDate=this.minDate.getDate()):(this.focusedDate=vaadin.elements.datepicker.DatePickerHelper._getClosestDate(e,[this.minDate,this.maxDate]),this._focusedMonthDate=this.focusedDate.getDate())},_moveFocusByMonths:function(t){var e=this._currentlyFocusedDate(),i=new Date(0,0);i.setFullYear(e.getFullYear()),i.setMonth(e.getMonth()+t);var s=i.getMonth();i.setDate(this._focusedMonthDate||(this._focusedMonthDate=e.getDate())),i.getMonth()!==s&&i.setDate(0),this._dateAllowed(i,this.minDate,this.maxDate)?this.focusedDate=i:this._dateAllowed(e,this.minDate,this.maxDate)?0<t?(this.focusedDate=this.maxDate,this._focusedMonthDate=this.maxDate.getDate()):(this.focusedDate=this.minDate,this._focusedMonthDate=this.minDate.getDate()):(this.focusedDate=vaadin.elements.datepicker.DatePickerHelper._getClosestDate(e,[this.minDate,this.maxDate]),this._focusedMonthDate=this.focusedDate.getDate())},_moveFocusInsideMonth:function(t,e){var i=new Date(0,0);i.setFullYear(t.getFullYear()),"minDate"===e?(i.setMonth(t.getMonth()),i.setDate(1)):(i.setMonth(t.getMonth()+1),i.setDate(0)),this._dateAllowed(i,this.minDate,this.maxDate)?(this.focusedDate=i,this._focusedMonthDate=this.focusedDate.getDate()):this._dateAllowed(t,this.minDate,this.maxDate)?(this.focusedDate=this[e],this._focusedMonthDate=this[e].getDate()):(this.focusedDate=vaadin.elements.datepicker.DatePickerHelper._getClosestDate(t,[this.minDate,this.maxDate]),this._focusedMonthDate=this.focusedDate.getDate())},_dateAllowed:function(t,e,i){return(!e||e<=t)&&(!i||t<=i)},_isTodayAllowed:function(t,e){var i=new Date,s=new Date(0,0);return s.setFullYear(i.getFullYear()),s.setMonth(i.getMonth()),s.setDate(i.getDate()),this._dateAllowed(s,t,e)},_stopPropagation:function(t){t.stopPropagation()}});</script></dom-module><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.datepicker=vaadin.elements.datepicker||{},vaadin.elements.datepicker.DatePickerBehaviorImpl={observers:["_selectedDateChanged(_selectedDate, i18n.formatDate)","_validateInput(_selectedDate, _minDate, _maxDate)","_focusedDateChanged(_focusedDate, i18n.formatDate)","_announceFocusedDate(_focusedDate, opened, _ignoreAnnounce)"],properties:{_selectedDate:{type:Date},_focusedDate:Date,value:{type:String,observer:"_valueChanged"},hasValue:{type:Boolean,computed:"_hasValue(value)",reflectToAttribute:!0},initialPosition:String,label:String,opened:{type:Boolean,reflectToAttribute:!0,notify:!0},showWeekNumbers:{type:Boolean},_fullscreen:{value:!1,observer:"_fullscreenChanged"},_fullscreenMediaQuery:{value:"(max-width: 420px), (max-height: 420px)"},_touchPrevented:Array,i18n:{type:Object,value:function(){return{monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],firstDayOfWeek:0,week:"Week",calendar:"Calendar",clear:"Clear",today:"Today",cancel:"Cancel",formatDate:function(e){var t=e.getFullYear(),n=t.toString();return n.length<3&&0<=t&&(n=(t<10?"000":"00")+t),e.getMonth()+1+"/"+e.getDate()+"/"+n},parseDate:function(e){var t,n=e.split("/"),i=new Date,a=i.getMonth(),o=i.getFullYear();if(3===n.length?(o=parseInt(n[2]),n[2].length<3&&0<=o&&(o+=o<50?2e3:1900),a=parseInt(n[0])-1,t=parseInt(n[1])):2===n.length?(a=parseInt(n[0])-1,t=parseInt(n[1])):1===n.length&&(t=parseInt(n[0])),void 0!==t){var s=new Date(0,0);return s.setFullYear(o),s.setMonth(a),s.setDate(t),s}},formatTitle:function(e,t){return e+" "+t}}}},min:{type:String,observer:"_minChanged"},max:{type:String,observer:"_maxChanged"},_minDate:{type:Date,value:""},_maxDate:{type:Date,value:""},_noInput:{type:Boolean,computed:"_isNoInput(_fullscreen, i18n, i18n.*, _ios)"},_ios:{type:Boolean,value:navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/)},_ignoreAnnounce:{value:!0},_focusOverlayOnOpen:Boolean,_documentPointerEvents:String},created:function(){this._boundOnScroll=this._onScroll.bind(this)},listeners:{tap:"open",touchend:"_preventDefault",keydown:"_onKeydown",close:"_close","date-tap":"_close","focus-input":"_focusAndSelect"},ready:function(){void 0===this.value&&(this.value="")},open:function(){this.disabled||this.readonly||(this.$.dropdown.open(),this._updateAlignmentAndPosition())},_close:function(e){e&&e.stopPropagation(),this.inputElement.focus(),this.close()},close:function(){this.$.dropdown.close()},get inputElement(){return this._input()},_parseDate:function(e){var t=/^(\d{4}|[-+]\d{6})-(\d{2})-(\d{2})$/.exec(e);if(t){var n=new Date(0,0);return n.setFullYear(parseInt(t[1],10)),n.setMonth(parseInt(t[2],10)-1),n.setDate(parseInt(t[3],10)),n}},_isNoInput:function(){return this._fullscreen||!this.i18n.parseDate||this._ios},_formatISO:function(e){return e instanceof Date?new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0]:""},_selectedDateChanged:function(e,t){this.value=this._formatISO(e),this._focusedDate=e,this._inputValue=e?t(e):""},_focusedDateChanged:function(e,t){this._ignoreFocusedDateChange||this._noInput||(this._inputValue=e?t(e):"")},_hasValue:function(e){return!!e},_handleDateChange:function(e,t,n){if(t){var i=this._parseDate(t);i?vaadin.elements.datepicker.DatePickerHelper._dateEquals(this[e],i)||(this[e]=i):this.value=n}else this[e]=""},_valueChanged:function(e,t){this._handleDateChange("_selectedDate",e,t)},_minChanged:function(e,t){this._handleDateChange("_minDate",e,t)},_maxChanged:function(e,t){this._handleDateChange("_maxDate",e,t)},_updateAlignmentAndPosition:function(){var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0);this.$.dropdown.positionTarget=this._fullscreen?document.documentElement:this;var t=Math.max(document.documentElement.clientHeight,window.innerHeight||0),n=this.getBoundingClientRect().top>t/2,i=this.getBoundingClientRect().left+this.clientWidth/2>e/2;this.$.dropdown.verticalAlign=n?"bottom":"top",this.$.dropdown.horizontalAlign=this._fullscreen?null:i?"right":"left",this._fullscreen?(this.$.dropdown.style.marginTop=0,this.$.dropdown.style.marginBottom=0):(this.$.dropdown.style.marginTop=(n?10:this.clientHeight+2)+"px",this.$.dropdown.style.marginBottom=(n?this.clientHeight:10)+"px")},_fullscreenChanged:function(){this.$.dropdown.opened&&this._updateAlignmentAndPosition()},_onOverlayOpened:function(){var e=this._parseDate(this.initialPosition),t=this._selectedDate||this.$.overlay.initialPosition||e||new Date;e||vaadin.elements.datepicker.DatePickerHelper._dateAllowed(t,this._minDate,this._maxDate)?this.$.overlay.initialPosition=t:this.$.overlay.initialPosition=vaadin.elements.datepicker.DatePickerHelper._getClosestDate(t,[this._minDate,this._maxDate]),this.$.overlay.scrollToDate(this.$.overlay.focusedDate||this.$.overlay.initialPosition),this._ignoreFocusedDateChange=!0,this.$.overlay.focusedDate=this.$.overlay.focusedDate||this.$.overlay.initialPosition,this._ignoreFocusedDateChange=!1,window.addEventListener("scroll",this._boundOnScroll,!0),this.listen(this,"iron-resize","_updateAlignmentAndPosition"),""===document.createElement("div").style.webkitOverflowScrolling&&(this._touchPrevented=this._preventWebkitOverflowScrollingTouch(this.parentElement)),this._focusOverlayOnOpen?(this.$.overlay.focus(),this._focusOverlayOnOpen=!1):this._focus(),this.updateStyles(),this._documentPointerEvents=document.body.style.pointerEvents,document.body.style.pointerEvents="none";var n=this.style.pointerEvents;this.style.pointerEvents="auto",this.style.pointerEvents=n,this._ignoreAnnounce=!1},_preventWebkitOverflowScrollingTouch:function(e){for(var t=[];e;){if("touch"===window.getComputedStyle(e).webkitOverflowScrolling){var n=e.style.webkitOverflowScrolling;e.style.webkitOverflowScrolling="auto",t.push({element:e,oldInlineValue:n})}e=e.parentElement}return t},_onOverlayClosed:function(){if(this._ignoreAnnounce=!0,window.removeEventListener("scroll",this._boundOnScroll,!0),this.unlisten(this,"iron-resize","_updateAlignmentAndPosition"),this._touchPrevented&&(this._touchPrevented.forEach(function(e){e.element.style.webkitOverflowScrolling=e.oldInlineValue}),this._touchPrevented=[]),this.updateStyles(),document.body.style.pointerEvents=this._documentPointerEvents,this._ignoreFocusedDateChange=!0,this.i18n.parseDate){var e=this._inputValue,t=this.i18n.parseDate(e);this._isValidDate(t)?this._selectedDate=t:(this._selectedDate=null,this._inputValue=e)}else this._focusedDate&&(this._selectedDate=this._focusedDate);this._ignoreFocusedDateChange=!1;var n=window.unwrap?window.unwrap(this.inputElement):this.inputElement;(this.shadowRoot&&this.shadowRoot.activeElement===n||document.activeElement===n)&&(n.selectionStart=n.selectionEnd),this.validate()},detached:function(){this._onOverlayClosed()},_onScroll:function(e){e.target!==window&&this.$.overlay.contains(e.target)||this._updateAlignmentAndPosition()},_preventCancelOnComponentAccess:function(e){var t=Polymer.dom(e.detail);/tap|mousedown|touchstart/.test(e.detail.type)&&-1<t.path.indexOf(this)&&e.preventDefault()},_focus:function(){this._noInput?this.$.overlay.focus():this.inputElement.focus()},_focusAndSelect:function(){this._noInput||(this._focus(),this.inputElement.setSelectionRange(0,this._inputValue.length))},_preventDefault:function(e){e.preventDefault()},_eventKey:function(e){for(var t=["down","up","enter","esc","tab"],n=0;n<t.length;n++){var i=t[n];if(Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(e,i))return i}},_isValidDate:function(e){return e&&!isNaN(e.getTime())},_onKeydown:function(e){if(this._noInput){-1===[9].indexOf(e.keyCode)&&e.preventDefault()}switch(this._eventKey(e)){case"down":case"up":e.preventDefault(),this.opened?(this.$.overlay.focus(),this.$.overlay._onKeydown(e)):(this._focusOverlayOnOpen=!0,this.open());break;case"enter":this.$.overlay.focusedDate&&(this._selectedDate=this.$.overlay.focusedDate),this.close();break;case"esc":this._focusedDate=this._selectedDate,this._close();break;case"tab":this.opened&&(e.preventDefault(),this.inputElement.setSelectionRange(0,0),e.shiftKey?this.$.overlay.focusCancel():(this.$.overlay.focus(),this.$.overlay.revealDate(this._focusedDate)))}},_validateInput:function(e,t,n){e&&(t||n)&&(this.invalid=!vaadin.elements.datepicker.DatePickerHelper._dateAllowed(e,t,n))},_userInputValueChanged:function(){var e=this.i18n.parseDate&&this.i18n.parseDate(this._inputValue);this._isValidDate(e)&&(this._ignoreFocusedDateChange=!0,this._focusedDate=e,this._ignoreFocusedDateChange=!1),this.opened||(this.open(),this.$.dropdown.async(this.$.dropdown.refit,500))},_announceFocusedDate:function(e,t,n){t&&!n&&this.$.overlay.announceFocusedDate()}},vaadin.elements.datepicker.DatePickerBehavior=[Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior,Polymer.IronA11yKeysBehavior,Polymer.IronResizableBehavior,vaadin.elements.datepicker.DatePickerBehaviorImpl];</script><dom-module id="vaadin-date-picker" assetpath="../../../../bower_components/vaadin-date-picker/"><template><style>:host{display:block}:host([opened]){pointer-events:auto}#overlay{height:100vh;width:420px}#inputcontainer{padding-bottom:0}#inputcontainer,#inputcontainer input{cursor:pointer}#inputcontainer:focus{outline:0}paper-input-container div[suffix]{box-sizing:content-box;position:absolute;right:-4px;bottom:-4px;width:24px;height:24px;padding:4px;text-align:center}paper-input-container iron-icon{fill:rgba(0,0,0,.26);cursor:pointer;--iron-icon-width:20px;--iron-icon-height:20px;margin-top:-1px;transition:fill .2s}paper-input-container paper-ripple{color:rgba(0,0,0,.54)}:host([opened]) paper-input-container{--paper-input-container-underline-focus:{-webkit-transform:none;transform:none};}:host([opened]) paper-input-container iron-icon,paper-input-container iron-icon:hover{fill:rgba(0,0,0,.54)}:host([opened]) paper-input-container iron-icon:hover{fill:rgba(0,0,0,.86)}#input[no-input]{pointer-events:none}#clear{right:28px}#clear iron-icon{@apply (--vaadin-date-picker-clear-icon);}#calendar iron-icon{@apply (--vaadin-date-picker-calendar-icon);}:host(:not([has-value])) #clear,:host([disabled]) #calendar,:host([disabled]) #clear,:host([readonly]) #calendar,:host([readonly]) #clear{display:none}#input{box-sizing:border-box;padding-right:28px}#input::-ms-clear{display:none}:host([opened][has-value]) #input{padding-right:60px;margin-right:-32px}</style><paper-input-container id="inputcontainer" auto-validate$="[[autoValidate]]" invalid$="[[invalid]]" disabled$="[[disabled]]" role="application" always-float-label="[[_computeAlwaysFloatLabel(placeholder)]]"><label id="label" aria-hidden="true">[[label]]</label><input id="input" is="iron-input" autocomplete="off" type="text" on-focus="_focus" value="{{_userInputValue::input}}" name$="[[name]]" placeholder$="[[placeholder]]" aria-label$="[[label]]" invalid="{{invalid}}" required$="[[required]]" validator="[[validator]]" disabled$="[[disabled]]" readonly$="[[readonly]]" no-input$="[[_noInput]]"><div suffix="" id="clear" on-tap="_clear" role="button" aria-label$="[[i18n.clear]]"><iron-icon icon="vaadin-date-picker:clear"></iron-icon><paper-ripple class="circle" center=""></paper-ripple></div><div suffix="" id="calendar" on-tap="_toggle" role="button" aria-label$="[[i18n.calendar]]" aria-expanded$="[[_getAriaExpanded(opened)]]"><iron-icon icon="vaadin-date-picker:event"></iron-icon><paper-ripple class="circle" center=""></paper-ripple></div><template is="dom-if" if="[[errorMessage]]"><paper-input-error aria-live="assertive">[[errorMessage]]</paper-input-error></template></paper-input-container><iron-dropdown id="dropdown" fullscreen$="[[_fullscreen]]" allow-outside-scroll="" on-iron-overlay-opened="_onOverlayOpened" on-iron-overlay-closed="_onOverlayClosed" on-iron-overlay-canceled="_preventCancelOnComponentAccess" opened="{{opened}}" no-auto-focus=""><vaadin-date-picker-overlay id="overlay" i18n="[[i18n]]" fullscreen$="[[_fullscreen]]" label="[[label]]" selected-date="{{_selectedDate}}" class="dropdown-content" focused-date="{{_focusedDate}}" show-week-numbers="[[showWeekNumbers]]" min-date="[[_minDate]]" max-date="[[_maxDate]]" role="dialog"></vaadin-date-picker-overlay></iron-dropdown><iron-media-query query="[[_fullscreenMediaQuery]]" query-matches="{{_fullscreen}}"></iron-media-query></template><script>Polymer({is:"vaadin-date-picker",behaviors:[vaadin.elements.datepicker.DatePickerBehavior],properties:{autoValidate:{type:Boolean,value:!1},disabled:{type:Boolean,value:!1,reflectToAttribute:!0},readonly:{type:Boolean,value:!1,reflectToAttribute:!0},placeholder:String,errorMessage:String,_userInputValue:String},observers:["_userInputValueChanged(_userInputValue)"],_getValidity:function(){var e=!this._inputValue||this._selectedDate&&this._inputValue===this.i18n.formatDate(this._selectedDate),t=!this._selectedDate||vaadin.elements.datepicker.DatePickerHelper._dateAllowed(this._selectedDate,this._minDate,this._maxDate);return this.inputElement.validate()&&e&&t},_clear:function(e){e.stopPropagation(),this.value="",this.close()},_toggle:function(e){e.stopPropagation(),this[this.$.dropdown.opened?"close":"open"]()},_input:function(){return this.$.input},_computeAlwaysFloatLabel:function(e){return Boolean(e)},set _inputValue(e){this.inputElement.bindValue=e},get _inputValue(){return this.inputElement.bindValue},_getAriaExpanded:function(e){return Boolean(e).toString()}});</script></dom-module><link rel="import" href="../../../../src/app-theme/app-theme.html"><dom-module id="vaadin-grid-active-item-themability-styles" assetpath="../../../../bower_components/vaadin-grid/"><template><style>table tr[active] .vaadin-grid-cell:not([detailscell]) ::content>vaadin-grid-cell-content{@apply (--vaadin-grid-body-row-active-cell);}</style></template></dom-module><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.ActiveItemBehavior={properties:{activeItem:{type:Object,notify:!0,value:null}},listeners:{"cell-activate":"_activateItem"},observers:["_activeItemChanged(activeItem)"],_activateItem:function(e){var t=e.detail.model.item;this.activeItem=this.activeItem!==t?t:null,e.stopImmediatePropagation()},_activeItemChanged:function(){this.$.scroller._physicalItems&&this.$.scroller._physicalItems.forEach(function(e){this._updateItem(e,e.item)}.bind(this))}};</script><dom-module id="vaadin-grid-table-scroll-styles" assetpath="../../../../bower_components/vaadin-grid/"><template><style>:host{transform:translateZ(0)}thead{position:absolute;top:0;width:100%}tfoot{position:absolute;bottom:0;width:100%}tbody{z-index:-1}table{position:relative;overflow:auto;-webkit-overflow-scrolling:touch;z-index:-2}:host([ios]) table{transform:none}:host([fixed-sections]){transform:translateZ(0);overflow:hidden}:host([fixed-sections]) tfoot,:host([fixed-sections]) thead{position:fixed}:host([fixed-sections]) tbody#items{position:fixed;width:100%;will-change:transform}:host([fixed-sections]) table{transform:none}</style></template></dom-module><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.TableScrollBehaviorImpl={properties:{_vidxOffset:{type:Number,value:0},ios:{type:Boolean,value:navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),reflectToAttribute:!0},fixedSections:{type:Boolean,reflectToAttribute:!0,computed:"_hasFixedSections(scrollbarWidth)"},_frozenCells:{type:Array,value:function(){return[]}},scrolling:{type:Boolean,reflectToAttribute:!0}},listeners:{"table.wheel":"_onWheel"},ready:function(){this.scrollTarget=this.$.table},scrollToScaledIndex:function(t){this._pendingScrollToScaledIndex=null,this.$.items.style.borderTopWidth||(this._pendingScrollToScaledIndex=t),t=Math.min(Math.max(t,0),this.size-1),this.$.table.scrollTop=t/this.size*this.$.table.scrollHeight,this._scrollHandler(),this.scrollToIndex(t-this._vidxOffset),this._resetScrollPosition(this._scrollPosition),this._scrollHandler(),this._vidxOffset+this.lastVisibleIndex===this.size-1&&(this.$.table.scrollTop=this.$.table.scrollHeight-this.$.table.offsetHeight,this._scrollHandler())},_hasFixedSections:function(t){return navigator.userAgent.match(/Edge/)&&0===t},_onWheel:function(t){if(!t.ctrlKey&&!this._hasScrolledAncestor(t.target,t.deltaX,t.deltaY)){var e=this.$.table,i=Math.abs(t.deltaX)+Math.abs(t.deltaY);this._canScroll(e,t.deltaX,t.deltaY)?(t.preventDefault(),e.scrollTop+=t.deltaY,e.scrollLeft+=t.deltaX,this._scrollHandler(),this._hasResidualMomentum=!0,this._ignoreNewWheel=this.debounce("ignore-new-wheel",function(){this._ignoreNewWheel=null},500)):this._hasResidualMomentum&&i<=this._previousMomentum||this._ignoreNewWheel?t.preventDefault():i>this._previousMomentum&&(this._hasResidualMomentum=!1),this._previousMomentum=i}},_hasScrolledAncestor:function(t,e,i){return!!this._canScroll(t,e,i)||("vaadin-grid-cell-content"!==t.localName&&t!==this&&t.parentElement?this._hasScrolledAncestor(t.parentElement,e,i):void 0)},_canScroll:function(t,e,i){return 0<i&&t.scrollTop<t.scrollHeight-t.offsetHeight||i<0&&0<t.scrollTop||0<e&&t.scrollLeft<t.scrollWidth-t.offsetWidth||e<0&&0<t.scrollLeft},_scrollHandler:function(t){var e,i,s,l,r,o=Math.max(0,Math.min(this._maxScrollTop,this._scrollTop)),n=o-this._scrollPosition,h=this._ratio,a=0,c=this._hiddenContentSize,d=h,_=[];if(this._scrollPosition=o,this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,l=this._scrollBottom,r=this._physicalBottom,Math.abs(n)>this._physicalSize)this._physicalTop+=n,a=Math.round(n/this._physicalAverage);else if(n<0){var f=o-this._physicalTop,u=this._virtualStart;for(s=[],i=this._physicalEnd,d=f/c;d<h&&a<this._physicalCount&&0<u-a&&r-this._getPhysicalSizeIncrement(i)>l;)d+=(e=this._getPhysicalSizeIncrement(i))/c,r-=e,s.push(i),a++,i=0===i?this._physicalCount-1:i-1;_=s,a=-a}else if(0<n){var v=r-l,m=this._virtualEnd,p=this._virtualCount-1;for(s=[],i=this._physicalStart,d=v/c;d<h&&a<this._physicalCount&&m+a<p&&this._physicalTop+this._getPhysicalSizeIncrement(i)<o;)d+=(e=this._getPhysicalSizeIncrement(i))/c,this._physicalTop+=e,s.push(i),a++,i=(i+1)%this._physicalCount}this._virtualCount<this.size&&this._adjustVirtualIndexOffset(n),0===a?(r<l||this._physicalTop>o)&&this._increasePoolIfNeeded():(this._virtualStart=this._virtualStart+a,this._physicalStart=this._physicalStart+a,this._update(s,_)),this._translateStationaryElements(),this.hasAttribute("reordering")||(this.scrolling=!0),this.debounce("vaadin-grid-scrolling",function(){this.scrolling=!1,this._reorderRows()},100)},_adjustVirtualIndexOffset:function(t){if(1e4<Math.abs(t)){if(this._noScale)return void(this._noScale=!1);var e=Math.round(this._scrollPosition/this._scrollHeight*1e3)/1e3,i=e*this.size;this._vidxOffset=Math.round(i-e*this._virtualCount),0===this._scrollTop&&this.scrollToIndex(0)}else{var s=this._vidxOffset||0;0===this._scrollTop?(this._vidxOffset=0,s!==this._vidxOffset&&this.scrollToIndex(0)):this.firstVisibleIndex<1e3&&0<this._vidxOffset&&(this._vidxOffset-=Math.min(this._vidxOffset,100),this.scrollToIndex(this.firstVisibleIndex+(s-this._vidxOffset)+1),this._noScale=!0);var l=this.size-this._virtualCount;this._scrollTop>=this._maxScrollTop?(this._vidxOffset=l,s!==this._vidxOffset&&this.scrollToIndex(this._virtualCount)):this.firstVisibleIndex>this._virtualCount-1e3&&this._vidxOffset<l&&(this._vidxOffset+=Math.min(l-this._vidxOffset,100),this.scrollToIndex(this.firstVisibleIndex-(this._vidxOffset-s)),this._noScale=!0)}},_reorderRows:function(){var t=Polymer.dom(this.$.items),e=t.querySelectorAll("tr"),i=this._virtualStart+this._vidxOffset,s=e.length-(e[0].index-i);if(s<e.length/2)for(var l=0;l<s;l++)t.appendChild(e[l]);else for(var r=s;r<e.length;r++)t.insertBefore(e[r],e[0])},_frozenCellsChanged:function(){this.debounce("cache-elements",function(){Polymer.dom(this.root).querySelectorAll("td, th").forEach(function(t){t.style.transform=""}),this._frozenCells=Polymer.dom(this.root).querySelectorAll("[frozen]"),this._translateStationaryElements()}),this._updateLastFrozen()},_updateLastFrozen:function(){if(this.columnTree){var t=this.columnTree[this.columnTree.length-1].slice(0);t.sort(function(t,e){return t._order-e._order});var e=t.reduce(function(t,e,i){return e._lastFrozen=!1,e.frozen&&!e.hidden?i:t},void 0);void 0!==e&&(t[e]._lastFrozen=!0)}},_translateStationaryElements:function(){this.fixedSections?(this.$.items.style.transform=this._getTranslate(-this._scrollLeft||0,-this._scrollTop||0),this.$.footer.style.transform=this.$.header.style.transform=this._getTranslate(-this._scrollLeft||0,0)):this.$.footer.style.transform=this.$.header.style.transform=this._getTranslate(0,this._scrollTop);for(var t=this._getTranslate(this._scrollLeft,0),e=0;e<this._frozenCells.length;e++)this._frozenCells[e].style.transform=t},_getTranslate:function(t,e){return"translate("+t+"px,"+e+"px)"}},vaadin.elements.grid.TableScrollBehavior=[Polymer.IronScrollTargetBehavior,vaadin.elements.grid.TableScrollBehaviorImpl];</script><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.CellClickBehavior={listeners:{click:"_onClick"},attached:function(){this._cellContentFocusHandler=function(e){e.target!==this._cellContent&&this.fire("cell-content-focus",{cell:this})}.bind(this),this.addEventListener("focus",this._cellContentFocusHandler,!0)},detached:function(){this.removeEventListener("focus",this._cellContentFocusHandler,!0)},_onClick:function(e){if("vaadin-grid-sorter"!==this.localName&&this.fire("cell-focus",{cell:this}),this._cellClick){var t=Polymer.dom(e).localTarget;t.getDistributedNodes&&(t=Polymer.dom(t).getDistributedNodes()[0]);var i=Polymer.dom(e).path,l=Array.prototype.slice.call(i,0,i.indexOf(t)+1);t.contains(this.target&&this.target.root.activeElement||document.activeElement)||l.some(this._isFocusable)||this._cellClick(e)}},_isFocusable:function(e){var t=Polymer.dom(e).parentNode,i=-1!==Polymer.dom(t).querySelectorAll("[tabindex], button, input, select, textarea, object, iframe, label, a[href], area[href]").indexOf(e);return!e.disabled&&i}};</script><dom-module id="vaadin-grid-table-cell" assetpath="../../../../bower_components/vaadin-grid/"></dom-module><dom-module id="vaadin-grid-table-header-cell" assetpath="../../../../bower_components/vaadin-grid/"></dom-module><dom-module id="vaadin-grid-table-footer-cell" assetpath="../../../../bower_components/vaadin-grid/"></dom-module><dom-module id="vaadin-grid-sizer-cell" assetpath="../../../../bower_components/vaadin-grid/"></dom-module><script>!function(){var e={properties:{column:Object,expanded:Boolean,flexGrow:Number,focused:{type:Boolean,reflectToAttribute:!0},frozen:{type:Boolean,reflectToAttribute:!0},lastFrozen:{type:Boolean,reflectToAttribute:!0},hidden:{type:Boolean,reflectToAttribute:!0},instance:Object,index:Number,item:Object,selected:Boolean,template:Object,target:Object,width:String,order:Number,reorderStatus:{type:String,reflectToAttribute:!0},_childColumns:Array,_cellContent:Object,_insertionPoint:Object,_templatizer:Object},observers:["_columnChanged(column)","_cellAttached(column, isAttached)","_expandedChanged(expanded, instance)","_flexGrowChanged(flexGrow)","_indexChanged(index, instance)","_itemChanged(item, instance)","_instanceChanged(instance, target)","_selectedChanged(selected, instance)","_toggleContent(isAttached, _cellContent, _insertionPoint)","_toggleInstance(isAttached, _templatizer, instance)","_widthChanged(width)","_orderChanged(order)","_visibleChildColumnsChanged(_visibleChildColumns)","_childColumnsChanged(_childColumns)"],created:function(){this.classList.add("vaadin-grid-cell")},_columnChanged:function(e){this.flexGrow=e.flexGrow,this.frozen=e.frozen,this.lastFrozen=e._lastFrozen,this.headerTemplate=e.headerTemplate,this.footerTemplate=e.footerTemplate,this.template=e.template,this.width=e.width,this.hidden=e.hidden,this.resizable=e.resizable,this._childColumns=e._childColumns,this.order=e._order,e.colSpan&&this.setAttribute("colspan",e.colSpan),this.listen(e,"property-changed","_columnPropChanged")},_cellAttached:function(e,t){t?this.listen(e,"property-changed","_columnPropChanged"):this.unlisten(e,"property-changed","_columnPropChanged")},_columnPropChanged:function(e){e.target==this.column&&("colSpan"===e.detail.path?this.setAttribute("colspan",e.detail.value):this[e.detail.path]=e.detail.value)},_expandedChanged:function(e,t){t.__expanded__=e,t.expanded=e},_flexGrowChanged:function(e){this.style.flexGrow=e},_indexChanged:function(e,t){t.index=e},_itemChanged:function(e,t){t.item=e},_selectedChanged:function(e,t){t.__selected__=e,t.selected=e},_childColumnsChanged:function(e){this.setAttribute("colspan",e.length)},_toggleContent:function(e,t,n){e?(Polymer.dom(t).parentNode!==this.target&&Polymer.dom(this.target).appendChild(t),Polymer.dom(this).appendChild(n)):this.async(function(){this.isAttached||Polymer.dom(t).parentNode!==this.target||Polymer.dom(this.target).removeChild(t)})},_toggleInstance:function(e,t,n){e?t.addInstance(n):t.removeInstance(n)},_widthChanged:function(e){this.style.width=e},_orderChanged:function(e){this.style.order=e},_templateChanged:function(e){this.instance=e.templatizer.createInstance(),this._templatizer=e.templatizer},_instanceChanged:function(e,t){this.style.height="",this._cellContent=document.createElement("vaadin-grid-cell-content");var n="vaadin-grid-cell-content-"+(vaadin.elements.grid._contentIndex=vaadin.elements.grid._contentIndex+1||0);this._cellContent.setAttribute("id",n),Polymer.dom(this._cellContent).appendChild(this.instance.root),this._insertionPoint=document.createElement("content"),this._insertionPoint.setAttribute("select","#"+n)}};Polymer({is:"vaadin-grid-table-cell",extends:"td",behaviors:[e,vaadin.elements.grid.CellClickBehavior],observers:["_templateChanged(template)"],_cellClick:function(e){e.defaultPrevented||this.fire("cell-activate",{model:this.instance})}}),Polymer({is:"vaadin-grid-table-header-cell",extends:"th",properties:{headerTemplate:Object,resizable:Boolean,columnResizing:{type:Boolean,reflectToAttribute:!0}},behaviors:[e,vaadin.elements.grid.CellClickBehavior],observers:["_headerTemplateChanged(headerTemplate, isAttached)","_resizableChanged(resizable)"],listeners:{mousedown:"_cancelMouseDownOnResize",mousemove:"_enableDrag",mouseout:"_disableDrag",touchstart:"_onTouchStart",touchmove:"_onTouchMove",touchend:"_onTouchEnd",contextmenu:"_onContextMenu"},_onContextMenu:function(e){this._reorderGhost&&e.preventDefault()},_onTouchStart:function(e){e.target!==this._resizeHandle&&this.target.columnReorderingAllowed&&(this._startReorderTimeout=setTimeout(this._startReorder.bind(this,e),100))},_startReorder:function(e){this._reorderGhost=this._getGhost(),this._reorderGhost.style.visibility="visible";var t=new CustomEvent("dragstart",{bubbles:!0});this._cellContent.dispatchEvent(t),this._reorderXY={x:e.touches[0].clientX-this.getBoundingClientRect().left,y:e.touches[0].clientY-this.getBoundingClientRect().top},this._updateGhostPosition(e.touches[0].clientX,e.touches[0].clientY)},_onTouchMove:function(e){if(this._reorderGhost){e.preventDefault();var t=new CustomEvent("dragover",{bubbles:!0});t.clientX=e.touches[0].clientX,t.clientY=e.touches[0].clientY;var n=this._contentFromPoint(t.clientX,t.clientY);n&&n.dispatchEvent(t),this._updateGhostPosition(e.touches[0].clientX,e.touches[0].clientY)}else clearTimeout(this._startReorderTimeout)},_updateGhostPosition:function(e,t){var n=e-this._reorderXY.x,i=t-this._reorderXY.y-50,o=parseInt(this._reorderGhost.style.left||0),r=parseInt(this._reorderGhost.style.top||0),l=this._reorderGhost.getBoundingClientRect();this._reorderGhost.style.left=o-(l.left-n)+"px",this._reorderGhost.style.top=r-(l.top-i)+"px"},_onTouchEnd:function(e){if(clearTimeout(this._startReorderTimeout),this._reorderGhost){e.preventDefault();var t=new CustomEvent("dragend",{bubbles:!0});this.dispatchEvent(t),this._reorderGhost.style.visibility="hidden",this._reorderGhost=null}},_contentFromPoint:function(e,t){if(!Polymer.Settings.useShadow)return document.elementFromPoint(e,t);var n=this.target.$.scroller;n.toggleAttribute("no-content-pointer-events",!0);var i=n.root.elementFromPoint(e,t);return n.toggleAttribute("no-content-pointer-events",!1),i&&i.getContentChildren?i.getContentChildren("content")[0]:void 0},_getGhost:function(){var t=this.target.$.scroller.$.reorderghost;t.innerText=this._cellContent.innerText;var n=window.getComputedStyle(this._cellContent);return["boxSizing","display","width","height","background","alignItems","padding","border","flex-direction","overflow"].forEach(function(e){t.style[e]=n[e]},this),t},_enableDrag:function(){this._cellContent.draggable=this.target.columnReorderingAllowed&&!window.getSelection().toString()},_disableDrag:function(){this._cellContent.draggable=!1},_cancelMouseDownOnResize:function(e){e.target===this._resizeHandle&&e.preventDefault()},_resizableChanged:function(e){e?(this._resizeHandle=document.createElement("div"),this._resizeHandle.classList.add("vaadin-grid-column-resize-handle"),this.listen(this._resizeHandle,"track","_onTrack"),Polymer.dom(this).appendChild(this._resizeHandle)):this._resizeHandle&&(this.unlisten(this._resizeHandle,"track","_onTrack"),Polymer.dom(this).removeChild(this._resizeHandle))},_onTrack:function(e){this.columnResizing=!0;var t=this.column;"vaadin-grid-column-group"===t.localName&&(t=t._childColumns.slice(0).sort(function(e,t){return e._order-t._order}).filter(function(e){return!e.hidden}).pop());var i=this._getHeaderCellByColumn(t);if(i.offsetWidth){var n=window.getComputedStyle(i._cellContent),o=10+parseInt(n.paddingLeft)+parseInt(n.paddingRight);t.width=Math.max(o,i.offsetWidth+e.detail.x-i.getBoundingClientRect().right)+"px",t.flexGrow=0}var r=this.parentElement.parentElement;Polymer.dom(r).querySelectorAll("tr:last-child th").sort(function(e,t){return e.column._order-t.column._order}).forEach(function(e,t,n){t<n.indexOf(i)&&(e.column.width=e.offsetWidth+"px",e.column.flexGrow=0)}),this.columnResizing&&"end"===e.detail.state&&(this.columnResizing=!1),this.fire("column-resizing")},_getHeaderCellByColumn:function(t){var e=this.parentElement.parentElement;return Polymer.dom(e).querySelectorAll("tr:last-child th").filter(function(e){return e.column===t})[0]},_headerTemplateChanged:function(e,t){null===e||!this._isColumnRow&&"vaadin-grid-column-group"!==this.column.localName?(this._isEmpty=!0,this.instance=this.instance||{root:document.createElement("div")}):(this._isEmpty=!1,this.instance=this.instance||e.templatizer.createInstance(),this._templatizer=e.templatizer),t&&this.fire("cell-empty-changed")}}),Polymer({is:"vaadin-grid-table-footer-cell",extends:"td",properties:{footerTemplate:Object},behaviors:[e,vaadin.elements.grid.CellClickBehavior],observers:["_footerTemplateChanged(footerTemplate, isAttached)"],_footerTemplateChanged:function(e,t){null===e||!this._isColumnRow&&"vaadin-grid-column-group"!==this.column.localName?(this._isEmpty=!0,this.instance=this.instance||{root:document.createElement("div")}):(this._isEmpty=!1,this.instance=this.instance||e.templatizer.createInstance(),this._templatizer=e.templatizer),t&&this.fire("cell-empty-changed")}}),Polymer({is:"vaadin-grid-sizer-cell",behaviors:[e]})}();</script><dom-module id="vaadin-grid-sizer" assetpath="../../../../bower_components/vaadin-grid/"><template><style>:host{display:flex;position:relative;width:100%;visibility:hidden}.cell{display:block;flex-shrink:0;line-height:0;font-size:1px;margin-top:-1em}.cell[hidden]{display:none}</style><template is="dom-repeat" items="[[_columns]]" as="column"><vaadin-grid-sizer-cell class="cell" column="[[column]]">&nbsp;</vaadin-grid-sizer-cell></template></template><script>Polymer({is:"vaadin-grid-sizer",extends:"div",properties:{columnTree:Array,top:Number,_columns:Array},observers:["_columnTreeChanged(columnTree)","_topChanged(top)"],_columnTreeChanged:function(e){this._columns=e[e.length-1]},_topChanged:function(e){this.style.top=e+"px"}});</script></dom-module><dom-module id="vaadin-grid-table-outer-scroller" assetpath="../../../../bower_components/vaadin-grid/"><template><style>:host{display:block;height:100%;width:100%;position:absolute;top:0;box-sizing:border-box;overflow:auto}:host([passthrough]){pointer-events:none}:host([ios]){pointer-events:all;z-index:-3}:host([ios][scrolling]){z-index:0}</style><content></content></template><script>Polymer({is:"vaadin-grid-table-outer-scroller",properties:{scrollTarget:{type:Object,observer:"_scrollTargetChanged"},passthrough:{type:Boolean,reflectToAttribute:!0,value:!0}},listeners:{scroll:"_syncScrollTarget"},attached:function(){this.listen(this.domHost,"mousemove","_onMouseMove"),this.style.webkitOverflowScrolling="touch"},detached:function(){this.unlisten(this.domHost,"mousemove","_onMouseMove")},_scrollTargetChanged:function(t,s){s&&this.unlisten(s,"scroll","_syncOuterScroller"),this.listen(t,"scroll","_syncOuterScroller")},_onMouseMove:function(t){this.passthrough=t.offsetY<=this.clientHeight&&t.offsetX<=this.clientWidth},_syncOuterScroller:function(){this._syncingScrollTarget||(this._syncingOuterScroller=!0,this.scrollTop=this.domHost._scrollTop,this.scrollLeft=this.domHost._scrollLeft),this._syncingScrollTarget=!1},_syncScrollTarget:function(){this._syncingOuterScroller||(this._syncingScrollTarget=!0,this.scrollTarget.scrollTop=this.scrollTop,this.scrollTarget.scrollLeft=this.scrollLeft,this.domHost._scrollHandler()),this._syncingOuterScroller=!1}});</script></dom-module><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.FocusableCellContainerBehavior={properties:{focused:{type:Boolean,reflectToAttribute:!0},_focusedRow:Object,_focusedRowIndex:Number,_focusedCell:Object,_focusedCellIndex:Number,_lastFocusedCell:Object},observers:["_announceFocusedCell(_focusedCell, focused)","_dispatchEvents(_focusedCell, focused)","_focusedCellChanged(_focusedRowIndex, _focusedCellIndex)"],_announceFocusedCell:function(e,s){if(this.domHost.navigating&&s){var t=e._cellContent.id;if("vaadin-grid-table-body"===this.is&&!e.hasAttribute("detailscell")){var o=Polymer.dom(e.parentElement).querySelectorAll("td").indexOf(e);t=this.domHost.$.header.lastElementChild.children[o]._cellContent.id+" "+t}this._getFocusTrap().activeTarget=t}},_dispatchEvents:function(e,s){this._lastFocusedCell&&(this._lastFocusedCell._cellContent.dispatchEvent(new CustomEvent("cell-focusout")),this._lastFocusedCell=void 0),s&&(e._cellContent.dispatchEvent(new CustomEvent("cell-focusin")),this._lastFocusedCell=e)},_focusedCellChanged:function(t,o){Polymer.dom(this).children.forEach(function(e,s){e.focused=s===t,e.focused&&(this._focusedRow=e,this._focusedCellIndex=Math.min(o,e.children.length-1),this._focusedCell=e.children[this._focusedCellIndex]),e.cells.forEach(function(e,s){e.focused=s===this._focusedCellIndex}.bind(this))}.bind(this))},_getFocusTrap:function(){switch(this.is){case"vaadin-grid-table-header":return this.domHost.$.headerFocusTrap;case"vaadin-grid-table-body":return this.domHost.$.bodyFocusTrap;case"vaadin-grid-table-footer":return this.domHost.$.footerFocusTrap}},focusLeft:function(){if(!this._focusedCell.hasAttribute("detailscell")){var e=this._visibleCellIndexes();if(0<e.length){var s=e.indexOf(this._focusedCellIndex);this._focusedCellIndex=e[Math.max(0,s-1)]}}},focusDown:function(){this._focusedRowIndex=Math.min(this._focusedRowIndex+1,this.children.length-1)},_visibleCellIndexes:function(){var e=[];if(this._focusedRow&&this._focusedRow.children){for(var t=this._focusedRow.children,s=0;s<t.length;s++)t[s].hidden||t[s]===this._focusedRow._rowDetailsCell||e.push(s);e.sort(function(e,s){return t[e].column._order<t[s].column._order?-1:1})}return e},focusPageDown:function(){this._focusedRowIndex=Math.min(this._focusedRowIndex+10,this.children.length-1)},focusPageUp:function(){this._focusedRowIndex=Math.max(0,this._focusedRowIndex-10)},focusRight:function(){if(!this._focusedCell.hasAttribute("detailscell")){var e=this._visibleCellIndexes();if(0<e.length){var s=e.indexOf(this._focusedCellIndex);this._focusedCellIndex=e[Math.min(s+1,e.length-1)]}}},focusUp:function(){this._focusedRowIndex=Math.max(0,this._focusedRowIndex-1)},focusHome:function(){if(!this._focusedCell.hasAttribute("detailscell")){var e=this._visibleCellIndexes();0<e.length&&(this._focusedCellIndex=e[0])}},focusEnd:function(){if(!this._focusedCell.hasAttribute("detailscell")){var e=this._visibleCellIndexes();0<e.length&&(this._focusedCellIndex=e[e.length-1])}},focusFirst:function(e){this._focusedRowIndex=0,this.focusHome()},focusLast:function(e){this._focusedRowIndex=this.children.length-1,this.focusEnd()}};</script><script>!function(){var e={properties:{columnTree:Array,target:Object,_rows:Array},observers:["_columnTreeChanged(columnTree, target)","_rowsChanged(_rows)"],_columnTreeChanged:function(e,o){this._rows&&this._rows.forEach(function(e){Polymer.dom(e).innerHTML=""});for(var s=[],t=0;t<e.length;t++){var i=this._createRow();i.target=o,i._isColumnRow=t==e.length-1,i.columns=e[t],s.push(i)}this._rows="thead"===this.localName?s:s.reverse()},_rowsChanged:function(e){Polymer.dom(this).innerHTML="",e.forEach(function(e){Polymer.dom(this).appendChild(e)}.bind(this))}};Polymer({is:"vaadin-grid-table-header",extends:"thead",behaviors:[e,vaadin.elements.grid.FocusableCellContainerBehavior],_createRow:function(){return document.createElement("tr","vaadin-grid-table-header-row")}}),Polymer({is:"vaadin-grid-table-body",extends:"tbody",behaviors:[vaadin.elements.grid.FocusableCellContainerBehavior],observers:["_announceFocusedRow(_focusedRow)"],_announceFocusedRow:function(e){this.fire("iron-announce",{text:"Row "+(e.index+1)+" of "+this.domHost.size})},_moveFocusToDetailsCell:function(){this._focusedCell.focused=!1,this._focusedRow._rowDetailsCell.focused=!0,this._focusedCell=this._focusedRow._rowDetailsCell},_focusedRowHasDetailsCell:function(){return this._focusedRow&&this._focusedRow._rowDetailsCell&&this._focusedCell!==this._focusedRow._rowDetailsCell},focusDown:function(){this._focusedRowHasDetailsCell()?this._moveFocusToDetailsCell():this._focusedRowIndex=Math.min(this._focusedRowIndex+1,this.domHost.size-1)},focusUp:function(){this._focusedRow&&this._focusedCell===this._focusedRow._rowDetailsCell?this._focusedCellChanged(this._focusedRowIndex,this._focusedCellIndex):(this._focusedRowIndex=Math.max(0,this._focusedRowIndex-1),this._focusedRowHasDetailsCell()&&this._moveFocusToDetailsCell())},focusLast:function(){this._focusedRowIndex=this.domHost.size-1,this.focusEnd()},_focusedCellChanged:function(o,s){Polymer.dom(this).children.forEach(function(e){e.focused=e.index===o,e.index===o&&(this._focusedRow=e,this._focusedCell=e.children[s]),e.iterateCells(function(e,o){e.focused=o===s})}.bind(this))}}),Polymer({is:"vaadin-grid-table-footer",extends:"tfoot",behaviors:[e,vaadin.elements.grid.FocusableCellContainerBehavior],_createRow:function(){return document.createElement("tr","vaadin-grid-table-footer-row")}})}();</script><dom-module id="vaadin-grid-table-focus-trap" assetpath="../../../../bower_components/vaadin-grid/"><template><style>:host{position:absolute;z-index:-3;height:0}.primary:focus,.secondary:focus,::content .primary:focus,::content .secondary:focus,:host(:focus){outline:0}</style><div class="primary" tabindex="0" role="gridcell" on-focus="_onBaitFocus" on-blur="_onBaitBlur"><div aria-hidden="true">&nbsp;</div></div><div class="secondary" tabindex="-1" role="gridcell" on-focus="_onBaitFocus" on-blur="_onBaitBlur"><div aria-hidden="true">&nbsp;</div></div><slot></slot></template><script>Polymer({is:"vaadin-grid-table-focus-trap",hostAttributes:{tabindex:-1,role:"gridcell"},listeners:{focus:"_onFocus",focusin:"_stopPropagationForReannouncing",focusout:"_stopPropagationForReannouncing"},properties:{activeTarget:{type:String,observer:"_activeTargetChanged"}},ready:function(){this._primary=Polymer.dom(this.root).querySelector(".primary"),this._secondary=Polymer.dom(this.root).querySelector(".secondary"),Polymer.Settings.useNativeShadow&&(Polymer.dom(this).appendChild(this._primary),Polymer.dom(this).appendChild(this._secondary))},_onFocus:function(t){this._primary.focus()},_onBaitFocus:function(t){this.fire("focusin"),this._focused=t.target},_onBaitBlur:function(t){this.fire("focusout")},_activeTargetChanged:function(t){this._focused===this._primary?(this._secondary.setAttribute("aria-labelledby",t),this._secondary.focus()):(this._primary.setAttribute("aria-labelledby",t),this._primary.focus())},_reannounce:function(){this._isReannouncing=!0,this._focused===this._primary?(this._secondary.setAttribute("aria-labelledby",this.activeTarget),this._secondary.focus()):(this._primary.setAttribute("aria-labelledby",this.activeTarget),this._primary.focus()),this._isReannouncing=!1},_stopPropagationForReannouncing:function(t){this._isReannouncing&&(t.stopImmediatePropagation(),t.stopPropagation())}});</script></dom-module><dom-module id="vaadin-grid-table-row" assetpath="../../../../bower_components/vaadin-grid/"></dom-module><dom-module id="vaadin-grid-table-header-row" assetpath="../../../../bower_components/vaadin-grid/"></dom-module><script>!function(){var e={extends:"tr",properties:{active:{type:Boolean,reflectToAttribute:!0,value:!1},columns:Array,index:Number,cells:{value:[]},target:Object,expanded:{value:!1},focused:{type:Boolean,reflectToAttribute:!0},item:Object,selected:{reflectToAttribute:!0},_rowDetailsCell:Object,rowDetailsTemplate:Object},observers:["_columnsChanged(columns, target)","_indexChanged(index, cells)","_itemChanged(item, cells)","_itemChangedForDetails(item, _rowDetailsCell)","_rowDetailsChanged(expanded, rowDetailsTemplate, target)","_rowDetailsCellIndexChanged(_rowDetailsCell, index)","_rowDetailsCellChanged(_rowDetailsCell, target)","_selectedChanged(selected, cells)","_selectedChangedForDetails(selected, _rowDetailsCell)"],iterateCells:function(e){this.cells.forEach(e),this._rowDetailsCell&&e(this._rowDetailsCell)},_rowDetailsChanged:function(t,e,l){if(t){var i=document.createElement("td","vaadin-grid-table-cell");i.setAttribute("detailscell",!0),i.frozen=!0,i.target=l,i.template=e,i.toggleAttribute("lastcolumn",!0),Polymer.dom(this.root).appendChild(i),Polymer.dom.flush(),this._rowDetailsCell=i}else this._rowDetailsCell&&(Polymer.dom(this.root).removeChild(this._rowDetailsCell),this._rowDetailsCell=null);this.iterateCells(function(e){e.expanded=t}),this.target.$.scroller._frozenCellsChanged()},_updateRowVisibility:function(){this.hidden=this.cells.every(function(e){return e._isEmpty})},_rowDetailsCellChanged:function(e,t){t.$.scroller._update()},_rowDetailsCellIndexChanged:function(e,t,l){e?(e.index=t,Polymer.dom.flush(),this.updateRowDetailsCellMetrics()):this.style.paddingBottom=""},updateRowDetailsCellMetrics:function(){this._rowDetailsCell&&(this._rowDetailsCell.style.height="",this.style.paddingBottom=this._rowDetailsCell.style.height=this._rowDetailsCell.clientHeight+"px")},_columnsChanged:function(e,t){Polymer.dom(this).innerHTML="";var n=[];e.forEach(function(e,t){var l="_"+this.is.replace(/-/g,"_")+"_cells",i=e[l]=e[l]||[],o=i.filter(function(e){return!Polymer.dom(e).parentNode})[0];o||(o=this._createCell(),i.push(o)),o.index=this.index,o.target=this.target,o._isColumnRow=this._isColumnRow,o.column=e,Polymer.dom(this).appendChild(o),n.push(o)}.bind(this)),this.cells=n},_indexChanged:function(t,e,l){e.forEach(function(e){e.index=t})},_itemChanged:function(t,e){e.forEach(function(e){e.item=t})},_itemChangedForDetails:function(e,t){t&&(t.item=e)},_selectedChanged:function(t,e){e.forEach(function(e){e.selected=t})},_selectedChangedForDetails:function(e,t){t&&(t.selected=e)},updateLastColumn:function(){this.cells.slice(0).sort(function(e,t){return e.column._order-t.column._order}).forEach(function(e,t,l){e.toggleAttribute("lastcolumn",t===l.length-1)})}};Polymer({is:"vaadin-grid-table-row",behaviors:[e],_createCell:function(){return document.createElement("td","vaadin-grid-table-cell")}}),Polymer({is:"vaadin-grid-table-header-row",behaviors:[e],observers:["_updateRowVisibility(columns)"],listeners:{"cell-empty-changed":"_updateRowVisibility"},_createCell:function(){return document.createElement("th","vaadin-grid-table-header-cell")}}),Polymer({is:"vaadin-grid-table-footer-row",behaviors:[e],observers:["_updateRowVisibility(columns)"],listeners:{"cell-empty-changed":"_updateRowVisibility"},_createCell:function(){return document.createElement("td","vaadin-grid-table-footer-cell")}})}();</script><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.Templatizer=Polymer({is:"vaadin-grid-templatizer",factoryImpl:function(e){this.dataHost=e},behaviors:[Polymer.Templatizer],properties:{template:Object,_forwardedParentProps:Object,_templateInstances:Array},observers:["_templateChanged(template)","_forwardedParentPropsChanged(_forwardedParentProps.*, _templateInstances)"],created:function(){this._instanceProps={expanded:!0,index:!0,item:!0,selected:!0}},createInstance:function(){var e=this.stamp(null);return this.addInstance(e),e},addInstance:function(e){-1===this._templateInstances.indexOf(e)&&this._templateInstances.push(e)},removeInstance:function(e){var t=this._templateInstances.indexOf(e);this._templateInstances.splice(t,1)},_templateChanged:function(e){this._forwardedParentProps={},this._templateInstances=[],(e.templatizer=this).templatize(e),this._parentProps=this._parentProps||{}},_forwardInstanceProp:function(e,t,a){void 0!==e["__"+t+"__"]&&e["__"+t+"__"]!==a&&this.fire("template-instance-changed",{prop:t,value:a,inst:e})},_forwardInstancePath:function(e,t,a){0!==t.indexOf("item.")||this._suppressItemChangeEvent||this.fire("item-changed",{item:e.item,path:t.substring(5),value:a})},_forwardParentProp:function(e,t){this.set("_forwardedParentProps."+e,t)},_forwardParentPath:function(e,t){this.set("_forwardedParentProps."+e,t)},_forwardedParentPropsChanged:function(e,t){if("_forwardedParentProps"!==e.path){var a=e.path.substring(e.path.indexOf(".")+1),n=e.value;t.forEach(function(e){e.set(a,n)})}}});</script><dom-module id="vaadin-grid-row-details-styles" assetpath="../../../../bower_components/vaadin-grid/"><template><style>[detailscell]{position:absolute;bottom:0;left:0;width:100%}</style></template></dom-module><dom-module id="vaadin-grid-row-details-themability-styles" assetpath="../../../../bower_components/vaadin-grid/"><template><style>td[detailscell] ::content>vaadin-grid-cell-content{background:#fff;@apply (--vaadin-grid-body-row-details-cell);}</style></template></dom-module><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.RowDetailsBehavior={properties:{expandedItems:{type:Array,value:function(){return[]}}},listeners:{"template-instance-changed":"_templateInstanceChangedExpanded"},observers:["_expandedItemsChanged(expandedItems.*, dataProvider)","_rowDetailsTemplateChanged(_rowDetailsTemplate)"],_expandedItemsChanged:function(e,t){this._flushItemsDebouncer(),this.$.scroller._physicalItems&&this.$.scroller._physicalItems.forEach(function(e){e.expanded=this._isExpanded(e.item)}.bind(this))},_rowDetailsTemplateChanged:function(e){var t=new vaadin.elements.grid.Templatizer(this.dataHost);t._instanceProps={expanded:!0,index:!0,item:!0,selected:!0},Polymer.dom(this.root).appendChild(t),t.template=e},_isExpanded:function(e){return this.expandedItems&&-1!==this.expandedItems.indexOf(e)},expandItem:function(e){this._isExpanded(e)||this.push("expandedItems",e)},collapseItem:function(e){this._isExpanded(e)&&this.splice("expandedItems",this.expandedItems.indexOf(e),1)},_templateInstanceChangedExpanded:function(e){"expanded"===e.detail.prop&&(e.detail.value?this.expandItem(e.detail.inst.item):this.collapseItem(e.detail.inst.item),e.stopPropagation())}};</script><dom-module id="vaadin-grid-data-provider-themability-styles" assetpath="../../../../bower_components/vaadin-grid/"><template><style>@keyframes vaadin-grid-spin-360{100%{transform:rotate(360deg)}}@-webkit-keyframes vaadin-grid-spin-360{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}#spinner{border:2px solid var(--primary-color,#03A9F4);border-radius:50%;border-right-color:transparent;border-top-color:transparent;content:"";height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px;pointer-events:none;opacity:0;@apply (--vaadin-grid-loading-spinner);}:host([loading]) #spinner{opacity:1;-webkit-animation:vaadin-grid-spin-360 .4s linear infinite;animation:vaadin-grid-spin-360 .4s linear infinite}:host([loading]) #items{opacity:.5}</style></template></dom-module><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.DataProviderBehavior={listeners:{"item-changed":"_templateItemChanged"},properties:{pageSize:{type:Number,value:50,observer:"_pageSizeChanged"},dataProvider:{type:Object,notify:!0,observer:"_dataProviderChanged"},_loading:Boolean,_cache:{type:Object,value:function(){return{}}},_pendingRequests:{type:Object,value:function(){return{}}}},_templateItemChanged:function(t){var i=t.detail.item;Polymer.dom(this.$.scroller.$.items).children.forEach(function(e){e.item===i&&e.iterateCells(function(e){e._templatizer._suppressItemChangeEvent=!0,e.instance.notifyPath("item."+t.detail.path,t.detail.value),e._templatizer._suppressItemChangeEvent=!1})})},_getCachedItem:function(e){var t=this._getPageForIndex(e),i=this._cache&&this._cache[t];return i?i[e-t*this.pageSize]:null},_getItem:function(e,t){this._updateItem(t,this._getCachedItem(e)),this._eagerlyLoadPages();var i=this._uncachedPagesForPhysicalItems();0<i.length&&(this._loading=!0,this.debounce("load",function(){i.forEach(function(e){this._loadPage(e)}.bind(this))},100))},_cachedPagesForPhysicalItems:function(){return this._pagesForPhysicalItems().filter(function(e){return void 0!==this._cache&&void 0!==this._cache[e]}.bind(this))},_uncachedPagesForPhysicalItems:function(){return this._pagesForPhysicalItems().filter(function(e){return void 0!==this._cache&&void 0===this._cache[e]}.bind(this))},_eagerlyLoadPages:function(){var e=this._cachedPagesForPhysicalItems().slice(0);if(0<e.length){e.sort(function(e,t){return t<e});var t=Math.max(0,e[0]-1),i=Math.min(e[e.length-1]+1,Math.max(0,Math.floor(this.size/this.pageSize)-1));this._loadPage(t),this._loadPage(i)}},_pagesForPhysicalItems:function(){return[this._getPageForIndex(this.$.scroller.firstVisibleIndex+this.$.scroller._vidxOffset)].concat(this.$.scroller._physicalItems.filter(function(e){return e.index}).map(function(e){return this._getPageForIndex(e.index)}.bind(this))).reduce(function(e,t){return-1===e.indexOf(t)&&e.push(t),e},[])},_updateItems:function(e,t){for(var i=0;i<this.pageSize;i++){var s=e*this.pageSize+i,a=this.$.scroller._virtualIndexToItem[s];a&&(this._updateItem(a,t[i]),this.debounce("update-heights",function(){this.$.scroller._updateMetrics(),this.$.scroller._positionItems(),this.$.scroller._updateScrollerSize()},1))}},_loadPage:function(t,i){if(i=i||this._updateItems.bind(this),!this._cache[t]&&!this._pendingRequests[t]&&this.dataProvider){this._pendingRequests[t]=!0;var e={page:t,pageSize:this.pageSize,sortOrders:this._mapSorters(),filters:this._mapFilters()};this.dataProvider(e,function(e){this._cache[t]=e,delete this._pendingRequests[t],i(t,e),this._loading=0<this._pendingRequests.length,this.debounce("check-size",this._checkSize,2e3)}.bind(this))}},_getPageForIndex:function(e){return Math.floor(e/this.pageSize)},clearCache:function(){this._cache={},this._pendingRequests={},this.$.scroller.hasData&&this.$.scroller._update(),this._flushItemsDebouncer()},_flushItemsDebouncer:function(){this.flushDebouncer("load")},_pageSizeChanged:function(e,t){void 0!==t&&e!==t&&this.clearCache()},_checkSize:function(){void 0===this.size&&console.warn('The <vaadin-grid> needs a value for "size" property in order to display rows.')},_dataProviderChanged:function(e,t){void 0!==t&&this.clearCache(),this.$.scroller.hasData||(this._loading=!0,this._loadPage(0,function(){this.$.scroller.hasData=!0}.bind(this)))}};</script><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.SelectionBehavior={properties:{selectedItems:{type:Object,notify:!0,value:function(){return[]}}},observers:["_selectedItemsChanged(selectedItems.*)"],listeners:{"template-instance-changed":"_templateInstanceChangedSelection"},_templateInstanceChangedSelection:function(e){if("selected"===e.detail.prop){var t=e.detail.inst.item;(this._isSelected(t)?this.deselectItem:this.selectItem).bind(this)(t),this.fire("iron-announce",{text:(this._isSelected(t)?"Selected":"Deselected")+" Row "+(e.detail.inst.index+1)+" of "+this.size}),e.stopPropagation()}},_isSelected:function(e){return this.selectedItems&&-1<this.selectedItems.indexOf(e)},selectItem:function(e){e=this._takeItem(e),this._isSelected(e)||this.push("selectedItems",e)},deselectItem:function(e){e=this._takeItem(e);var t=this.selectedItems.indexOf(e);-1<t&&this.splice("selectedItems",t,1)},_toggleItem:function(e){e=this._takeItem(e),-1===this.selectedItems.indexOf(e)?this.selectItem(e):this.deselectItem(e)},_takeItem:function(e){return"number"==typeof e&&0<=e&&this.items&&this.items.length>e?this.items[e]:e},_selectedItemsChanged:function(e){!this.$.scroller._physicalItems||"selectedItems"!==e.path&&"selectedItems.splices"!==e.path||this.$.scroller._physicalItems.forEach(function(e){e.selected=this._isSelected(e.item)}.bind(this))}};</script><dom-module id="vaadin-grid-selection-themability-styles" assetpath="../../../../bower_components/vaadin-grid/"><template><style>table tr[selected] .vaadin-grid-cell:not([detailscell]) ::content>vaadin-grid-cell-content{background-color:var(--paper-grey-100,#f3f3f3);@apply (--vaadin-grid-body-row-selected-cell);}</style></template></dom-module><dom-module id="vaadin-grid-navigation-themability-styles" assetpath="../../../../bower_components/vaadin-grid/"><template><style>:host(:focus){outline:0}:host([navigating]:not([interacting])) [focused]>tr[focused]>[focused] ::content>vaadin-grid-cell-content{box-shadow:inset 0 0 0 3px rgba(0,0,0,.3);@apply (--vaadin-grid-focused-cell);}</style></template></dom-module><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.KeyboardNavigationBehaviorImpl={hostAttributes:{tabindex:-1,role:"application"},keyBindings:{"ctrl+home":"_onCtrlHome","ctrl+end":"_onCtrlEnd",down:"_onArrowDown",end:"_onEnd",enter:"_onEnter",esc:"_onEscape",f2:"_onF2",home:"_onHome",left:"_onArrowLeft",pagedown:"_onPageDown",pageup:"_onPageUp",right:"_onArrowRight","shift+tab":"_onShiftTab",space:"_onSpace",tab:"_onTab",up:"_onArrowUp"},attached:function(){Polymer.IronA11yAnnouncer.requestAvailability()},_onEnd:function(t){this.$.scroller._onEnd(t)},_onEnter:function(t){this.$.scroller._onEnter(t)},_onEscape:function(t){this.$.scroller._onEscape(t)},_onF2:function(t){this.$.scroller._onF2(t)},_onTab:function(t){this.$.scroller._onTab(t)},_onShiftTab:function(t){this.$.scroller._onShiftTab(t)},_onArrowDown:function(t){this.$.scroller._onArrowDown(t)},_onArrowUp:function(t){this.$.scroller._onArrowUp(t)},_onArrowRight:function(t){this.$.scroller._onArrowRight(t)},_onArrowLeft:function(t){this.$.scroller._onArrowLeft(t)},_onHome:function(t){this.$.scroller._onHome(t)},_onCtrlHome:function(t){this.$.scroller._onCtrlHome(t)},_onCtrlEnd:function(t){this.$.scroller._onCtrlEnd(t)},_onPageDown:function(t){this.$.scroller._onPageDown(t)},_onPageUp:function(t){this.$.scroller._onPageUp(t)},_onSpace:function(t){this.$.scroller._onSpace(t)}},vaadin.elements.grid.KeyboardNavigationBehavior=[vaadin.elements.grid.KeyboardNavigationBehaviorImpl,Polymer.IronA11yKeysBehavior],vaadin.elements.grid.TableKeyboardBehavior={properties:{_virtualFocus:{type:Object,observer:"_virtualFocusChanged"},interacting:{type:Boolean,reflectToAttribute:!0,value:!1},navigating:{type:Boolean,reflectToAttribute:!0,value:!1}},listeners:{"cell-focus":"_onCellFocus","cell-content-focus":"_onCellContentFocus"},_isFooterVisible:function(){return 0<this.$.footer._rows.filter(function(t){return!t.hidden}).length},_onFocusout:function(t){this.navigating=!1,this.interacting=!1},_onHeaderFocus:function(t){this.navigating=!0,this.interacting=!1,this.$.header._focusedCellIndex=this.$.header._focusedCellIndex||0,this.$.header._focusedRowIndex=this.$.header._focusedRowIndex||0,this._virtualFocus=this.$.header},_onBodyFocus:function(t){this.navigating=!0,this.interacting=!1,this.$.items._focusedCellIndex=this.$.items._focusedCellIndex||0,this.$.items._focusedRowIndex=this.$.items._focusedRowIndex||0,this._virtualFocus=this.$.items},_onFooterFocus:function(t){this._isFooterVisible()?(this.navigating=!0,this.interacting=!1,this.$.footer._focusedCellIndex=this.$.footer._focusedCellIndex||0,this.$.footer._focusedRowIndex=this.$.footer._focusedRowIndex||0,this._virtualFocus=this.$.footer):this._virtualFocus||this.$.bodyFocusTrap.focus()},_virtualFocusChanged:function(t,e){e&&(e.focused=!1),t&&(t.focused=!0,t===this.$.items&&this._ensureVirtualFocusInViewport())},_onTab:function(t){if(!this.interacting&&this._virtualFocus)if(this.navigating)switch(this._virtualFocus){case this.$.header:this.$.bodyFocusTrap.focus(),t.preventDefault();break;case this.$.items:this.$.footerFocusTrap.focus(),this._isFooterVisible()?(this._virtualFocus=this.$.footer,t.preventDefault()):this.async(function(){this._virtualFocus=null},1);break;case this.$.footer:this._virtualFocus=null}else{switch(this._virtualFocus){case this.$.header:this.$.headerFocusTrap.focus();break;case this.$.items:this.$.bodyFocusTrap.focus();break;case this.$.footer:this.$.footerFocusTrap.focus()}t.preventDefault()}},_onShiftTab:function(t){if(!this.interacting)if(this.navigating)switch(this._virtualFocus){case this.$.footer:this.$.bodyFocusTrap.focus(),t.preventDefault();break;case this.$.items:this.$.headerFocusTrap.focus(),t.preventDefault();break;case this.$.header:this._virtualFocus=null}else{switch(this._virtualFocus){case this.$.footer:this.$.footerFocusTrap.focus();break;case this.$.items:this.$.bodyFocusTrap.focus();break;case this.$.header:this.$.headerFocusTrap.focus()}t.preventDefault()}},_isAboveViewport:function(t){return this.firstVisibleIndex>t},_onArrowDown:function(t){this.interacting||(t.preventDefault(),this.navigating=!0,this._virtualFocus.focusDown(),this._ensureVirtualFocusInViewport())},_scrollPageDown:function(){var t=this.$.header.getBoundingClientRect(),e=this.$.footer.getBoundingClientRect();this.$.table.scrollTop+=e.top-t.bottom,this._scrollHandler()},_onPageDown:function(t){if(!this.interacting)if(t.preventDefault(),this.navigating=!0,this._virtualFocus===this.$.items){var e=this.lastVisibleIndex;this._scrollPageDown(),this._virtualFocus._focusedRowIndex+=this.lastVisibleIndex-e||this.lastVisibleIndex-this._virtualFocus._focusedRowIndex,this._ensureVirtualFocusInViewport()}else this._virtualFocus.focusPageDown()},_scrollPageUp:function(){var t=this.$.header.getBoundingClientRect(),e=this.$.footer.getBoundingClientRect();this.$.table.scrollTop-=e.top-t.bottom,this._scrollHandler()},_onPageUp:function(t){if(!this.interacting)if(t.preventDefault(),this.navigating=!0,this._virtualFocus===this.$.items){var e=this.lastVisibleIndex;this._scrollPageUp(),this._virtualFocus._focusedRowIndex-=e-this.lastVisibleIndex||this._virtualFocus._focusedRowIndex,this._ensureVirtualFocusInViewport()}else this._virtualFocus.focusPageUp()},_onArrowUp:function(t){this.interacting||(t.preventDefault(),this.navigating=!0,this._virtualFocus.focusUp(),this._ensureVirtualFocusInViewport())},_onArrowRight:function(t){this.interacting||(t.preventDefault(),this.navigating=!0,this._virtualFocus.focusRight(),this._ensureVirtualFocusInViewport())},_onArrowLeft:function(t){this.interacting||(t.preventDefault(),this.navigating=!0,this._virtualFocus.focusLeft(),this._ensureVirtualFocusInViewport())},_onHome:function(t){this.interacting||(t.preventDefault(),this.navigating=!0,this._virtualFocus.focusHome(),this._ensureVirtualFocusInViewport())},_onEnd:function(t){this.interacting||(t.preventDefault(),this.navigating=!0,this._virtualFocus.focusEnd(),this._ensureVirtualFocusInViewport())},_moveFocusToFocusTarget:function(){var t=this._virtualFocus._focusedCell._cellContent,e=t.querySelector("[focus-target]")||t.firstElementChild;e&&e.focus()},_onEnter:function(t){this.interacting?"input"===t.detail.keyboardEvent.target.localName&&"text"===t.detail.keyboardEvent.target.type&&(this.interacting=!1,this._onTab(t)):(t.preventDefault(),this._moveFocusToFocusTarget())},_onEscape:function(t){this.interacting?(this.interacting=!1,this._onTab(t)):this.navigating&&this.domHost.focus()},_onF2:function(t){t.preventDefault(),this.interacting?(this.interacting=!1,this._onTab(t)):this._moveFocusToFocusTarget()},_onCtrlHome:function(t){this.interacting||(t.preventDefault(),this.navigating=!0,this._virtualFocus.focusFirst(),this._ensureVirtualFocusInViewport())},_onCtrlEnd:function(t){this.interacting||(t.preventDefault(),this.navigating=!0,this._virtualFocus.focusLast(),this._ensureVirtualFocusInViewport())},_onSpace:function(t){if(!this.interacting){t.preventDefault();var e=this._virtualFocus._focusedCell,i=e.getContentChildren("content")[0].firstElementChild;i?i.click():this.navigating&&this.fire("cell-activate",{model:e.instance})}},_onCellContentFocus:function(t){this.interacting=!0,this._onCellFocus(t)},_onCellFocus:function(t){var e=t.detail.cell,i=e.parentElement,o=i.parentElement,n=Polymer.dom(o).children.indexOf(i);o===this.$.items&&(n=i.index),o._focusedRowIndex=n,o._focusedCellIndex=Polymer.dom(i).children.indexOf(e),this._virtualFocus=o,e.hasAttribute("detailscell")&&(o._focusedCellIndex=0,o._moveFocusToDetailsCell())},_ensureVirtualFocusInViewport:function(){var t=this._vidxOffset+this._virtualStart,e=this._virtualFocus._focusedRowIndex;this._virtualFocus===this.$.items&&(e<t||e>t+this._physicalCount)?(this.scrollToScaledIndex(e),this._virtualFocus._focusedCellChanged(e,this._virtualFocus._focusedCellIndex)):this._ensureElementInViewport(this._virtualFocus._focusedCell)},_ensureElementInViewport:function(t){var e=t.getBoundingClientRect();if(this._virtualFocus===this.$.items){var i=this.$.footer.getBoundingClientRect().top,o=this.$.header.getBoundingClientRect().bottom;e.bottom>i?this.$.table.scrollTop+=e.bottom-i:e.top<o&&(this.$.table.scrollTop+=e.top-o)}if(!t.hasAttribute("detailscell")){var n=this.$.table.getBoundingClientRect().right,s=this.$.table.getBoundingClientRect().left,r=this._virtualFocus._focusedRow.querySelector("[last-frozen]");r&&(s=r.getBoundingClientRect().right),e.right>n?this.$.table.scrollLeft+=e.right-n:e.left<s&&(this.$.table.scrollLeft+=e.left-s)}}};</script><dom-module id="vaadin-grid-column-reordering-themability-styles" assetpath="../../../../bower_components/vaadin-grid/"><template><style>:host([reordering]) .vaadin-grid-cell{background:#000}:host([reordering]) .vaadin-grid-cell[reorder-status=dragging]{background:var(--primary-color,#000)}:host([reordering]) .vaadin-grid-cell:not([detailscell]) ::content>vaadin-grid-cell-content{transition:opacity .3s;transform:translateZ(0);opacity:.8}:host([reordering]) .vaadin-grid-cell[reorder-status=allowed] ::content>vaadin-grid-cell-content{opacity:1}:host([reordering]) .vaadin-grid-cell[reorder-status=dragging] ::content>vaadin-grid-cell-content{opacity:.95}</style></template></dom-module><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.ColumnReorderingBehavior={properties:{columnReorderingAllowed:{type:Boolean,value:!1}}},vaadin.elements.grid.TableColumnReorderingBehavior={properties:{_orderBaseScope:{type:Number,value:1e7}},listeners:{dragstart:"_onDragStart",dragover:"_onDragOver",dragend:"_onDragEnd"},observers:["_updateOrders(columnTree, columnTree.*)"],_updateOrders:function(e,t){e[0].forEach(function(e,t){e._order=(t+1)*this._orderBaseScope},this)},_onDragStart:function(e){var t=this._getCellByCellContent(e.target);t&&(this.toggleAttribute("reordering",!0),this._draggedColumn=t.column,this._setSiblingsReorderStatus(this._draggedColumn,"allowed"),this._draggedColumn._reorderStatus="dragging",e.dataTransfer&&(e.dataTransfer.setData("text",""),e.dataTransfer.effectAllowed="move"),this._autoScroller())},_setSiblingsReorderStatus:function(t,r){Polymer.dom(Polymer.dom(t).parentNode).children.filter(function(e){return/column/.test(e.localName)&&this._isSwapAllowed(e,t)},this).forEach(function(e){e._reorderStatus=r})},_onDragOver:function(e){e.preventDefault();var t=this._getCellByCellContent(e.target),r=this._getTargetColumn(t,this._draggedColumn);r&&this._isSwapAllowed(this._draggedColumn,r)&&this._isSwappableByPosition(r,e.clientX)&&this._swapColumnOrders(this._draggedColumn,r),this._lastDragClientX=e.clientX},_autoScroller:function(){if(this._lastDragClientX){var e=this._lastDragClientX-this.getBoundingClientRect().right+50,t=this.getBoundingClientRect().left-this._lastDragClientX+50;0<e?this.$.table.scrollLeft+=e/10:0<t&&(this.$.table.scrollLeft-=t/10),this._scrollHandler()}this._draggedColumn&&this.async(this._autoScroller,10)},_onDragEnd:function(e){this.toggleAttribute("reordering",!1),this._draggedColumn._reorderStatus="",this._setSiblingsReorderStatus(this._draggedColumn,""),this._draggedColumn=null,this._lastDragClientX=null},_isSwapAllowed:function(e,t){if(e&&t){var r=e!==t,n=e.parentElement===t.parentElement,l=e.frozen===t.frozen;return r&&n&&l}},_isSwappableByPosition:function(t,e){var r=Polymer.dom(this.$.header).querySelectorAll("th").filter(function(e){return e.column===t})[0],n=this.$.header.querySelector("[reorder-status=dragging]").getBoundingClientRect();return r.getBoundingClientRect().left>n.left?e>r.getBoundingClientRect().right-n.width:e<r.getBoundingClientRect().left+n.width},_getCellByCellContent:function(e){if(e){for(var t=null;null===t&&e!==this.target&&e;)"vaadin-grid-cell-content"===e.localName&&(t=e.id),e=e.parentElement;if(null!==t){var r=Polymer.dom(this.$.table).querySelector('content[select="#'+t+'"]');return Polymer.dom(r).parentNode}}},_swapColumnOrders:function(e,t){var r=e._order;e._order=t._order,t._order=r,this._updateLastFrozen(),this._updateLastColumn()},_getTargetColumn:function(e,t){if(e&&t){for(var r=e.column;r.parentElement!==t.parentElement&&r!==this.target;)r=r.parentElement;return r.parentElement===t.parentElement?r:e.column}}};</script><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.IronListBehaviorImpl=function(){var t=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),i=t&&8<=t[1];return{is:"iron-list",properties:{maxPhysicalCount:{type:Number,value:500},as:{type:String,value:"item"},indexAs:{type:String,value:"index"}},_ratio:.5,_scrollerPaddingTop:0,_scrollPosition:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_physicalIndexForKey:null,_estScrollHeight:0,_scrollHeight:0,_viewportHeight:0,_viewportWidth:0,_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_lastVisibleIndexVal:null,_collection:null,_itemsRendered:!1,_lastPage:null,_maxPages:3,_itemsPerRow:1,_itemWidth:0,_rowHeight:0,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportHeight},get _virtualEnd(){return this._virtualStart+this._physicalCount-1},get _hiddenContentSize(){return this._physicalSize-this._viewportHeight},get _maxScrollTop(){return this._estScrollHeight-this._viewportHeight+this._scrollerPaddingTop},_minVirtualStart:0,get _maxVirtualStart(){return Math.max(0,this._virtualCount-this._physicalCount)},_virtualStartVal:0,set _virtualStart(t){this._virtualStartVal=Math.min(this._maxVirtualStart,Math.max(this._minVirtualStart,t))},get _virtualStart(){return this._virtualStartVal||0},_physicalStartVal:0,set _physicalStart(t){this._physicalStartVal=t%this._physicalCount,this._physicalStartVal<0&&(this._physicalStartVal=this._physicalCount+this._physicalStartVal),this._physicalEnd=(this._physicalStart+this._physicalCount-1)%this._physicalCount},get _physicalStart(){return this._physicalStartVal||0},_physicalCountVal:0,set _physicalCount(t){this._physicalCountVal=t,this._physicalEnd=(this._physicalStart+this._physicalCount-1)%this._physicalCount},get _physicalCount(){return this._physicalCountVal},_physicalEnd:0,get _optPhysicalSize(){return this._viewportHeight*this._maxPages},get _optPhysicalCount(){return this._estRowsInView*this._itemsPerRow*this._maxPages},get _isVisible(){return this.scrollTarget&&Boolean(this.scrollTarget.offsetWidth||this.scrollTarget.offsetHeight)},get firstVisibleIndex(){if(null===this._firstVisibleIndexVal){var s=Math.floor(this._physicalTop+this._scrollerPaddingTop);this._firstVisibleIndexVal=this._iterateItems(function(t,i){if((s+=this._getPhysicalSizeIncrement(t))>this._scrollPosition)return i})||0}return this._firstVisibleIndexVal},get lastVisibleIndex(){if(null===this._lastVisibleIndexVal){var s=this._physicalTop;this._iterateItems(function(t,i){if(!(s<this._scrollBottom))return!0;this._lastVisibleIndexVal=i,s+=this._getPhysicalSizeIncrement(t)})}return this._lastVisibleIndexVal},get _defaultScrollTarget(){return this},get _virtualRowCount(){return Math.ceil(this._virtualCount/this._itemsPerRow)},get _estRowsInView(){return Math.ceil(this._viewportHeight/this._rowHeight)},get _physicalRows(){return Math.ceil(this._physicalCount/this._itemsPerRow)},attached:function(){this.updateViewportBoundaries(),this._render(),this.listen(this,"iron-resize","_resizeHandler")},detached:function(){this._itemsRendered=!1,this.unlisten(this,"iron-resize","_resizeHandler")},updateViewportBoundaries:function(){this._scrollerPaddingTop=this.scrollTarget===this?0:parseInt(window.getComputedStyle(this)["padding-top"],10),this._viewportHeight=this._scrollTargetHeight},_update:function(t,i){if(this._assignModels(t),this._updateMetrics(t),i)for(;i.length;){var s=i.pop();this._physicalTop-=this._getPhysicalSizeIncrement(s)}this._positionItems(),this._updateScrollerSize(),this._increasePoolIfNeeded()},_increasePoolIfNeeded:function(){if(0===this._viewportHeight)return!1;var t=this._physicalBottom>=this._scrollBottom&&this._physicalTop<=this._scrollPosition;if(this._physicalSize>=this._optPhysicalSize&&t)return!1;var i=Math.floor(this._physicalSize/this._viewportHeight);if(0===i)this._debounceTemplate(this._increasePool.bind(this,Math.round(.5*this._physicalCount)));else if(this._lastPage!==i&&t)Polymer.dom.addDebouncer(this.debounce("_debounceTemplate",this._increasePool.bind(this,this._itemsPerRow),16));else{var s=this._physicalSize/this._physicalCount,e=this._viewportHeight/s,h=this._maxPages*e,l=Math.ceil(h-this._physicalCount);this._debounceTemplate(this._increasePool.bind(this,l||1))}return this._lastPage=i,!0},_increasePool:function(t){var i=Math.min(this._physicalCount+t,this._virtualCount-this._virtualStart,Math.max(this.maxPhysicalCount,25)),s=this._physicalCount,e=i-s;e<=0||([].push.apply(this._physicalItems,this._createPool(e)),[].push.apply(this._physicalSizes,new Array(e)),this._physicalCount=s+e,this._update())},_render:function(){var t=0<this._virtualCount||0<this._physicalCount;this.isAttached&&!this._itemsRendered&&this._isVisible&&t&&(this._lastPage=0,this._update(),this._itemsRendered=!0)},_iterateItems:function(t,i){var s,e,h,l;if(2===arguments.length&&i){for(l=0;l<i.length;l++)if(s=i[l],e=this._computeVidx(s),null!=(h=t.call(this,s,e)))return h}else{for(s=this._physicalStart,e=this._virtualStart;s<this._physicalCount;s++,e++)if(null!=(h=t.call(this,s,e)))return h;for(s=0;s<this._physicalStart;s++,e++)if(null!=(h=t.call(this,s,e)))return h}},_computeVidx:function(t){return t>=this._physicalStart?this._virtualStart+(t-this._physicalStart):this._virtualStart+(this._physicalCount-this._physicalStart)+t},_updateMetrics:function(t){Polymer.dom.flush();var s=0,e=0,i=this._physicalAverageCount,h=this._physicalAverage;this._iterateItems(function(t,i){e+=this._physicalSizes[t]||0,this._physicalSizes[t]=this._physicalItems[t].offsetHeight,s+=this._physicalSizes[t],this._physicalAverageCount+=this._physicalSizes[t]?1:0},t),this._viewportHeight=this._scrollTargetHeight,this._physicalSize=this._physicalSize+s-e,this._physicalAverageCount!==i&&(this._physicalAverage=Math.round((h*i+s)/this._physicalAverageCount))},_positionItems:function(){this._adjustScrollPosition();var s=this._physicalTop;this._iterateItems(function(t,i){this._physicalItems[t].style.transform=this._getTranslate(0,s),s+=this._physicalSizes[t]})},_getPhysicalSizeIncrement:function(t){return this._physicalSizes[t]},_shouldRenderNextRow:function(t){return t%this._itemsPerRow==this._itemsPerRow-1},_adjustScrollPosition:function(){var t=0===this._virtualStart?this._physicalTop:Math.min(this._scrollPosition+this._physicalTop,0);t&&(this._physicalTop=this._physicalTop-t,i||0===this._physicalTop||this._resetScrollPosition(this._scrollTop-t))},_resetScrollPosition:function(t){this.scrollTarget&&(this._scrollTop=t,this._scrollPosition=this._scrollTop)},_updateScrollerSize:function(t){this._estScrollHeight=this._physicalBottom+Math.max(this._virtualCount-this._physicalCount-this._virtualStart,0)*this._physicalAverage,((t=(t=t||0===this._scrollHeight)||this._scrollPosition>=this._estScrollHeight-this._physicalSize)||Math.abs(this._estScrollHeight-this._scrollHeight)>=this._optPhysicalSize)&&(this.$.items.style.height=this._estScrollHeight+"px",this._scrollHeight=this._estScrollHeight)},scrollToIndex:function(t){Polymer.dom.flush(),t=Math.min(Math.max(t,0),this._virtualCount-1),(!this._isIndexRendered(t)||t>=this._maxVirtualStart)&&(this._virtualStart=t-1),this._assignModels(),this._updateMetrics();var i=Math.floor(this._virtualStart/this._itemsPerRow)*this._physicalAverage;this._physicalTop=i;for(var s=this._physicalStart,e=this._virtualStart,h=0,l=this._hiddenContentSize;e<t&&h<=l;)h+=this._getPhysicalSizeIncrement(s),s=(s+1)%this._physicalCount,e++;this._updateScrollerSize(!0),this._positionItems(),this._resetScrollPosition(this._physicalTop+this._scrollerPaddingTop+h),this._increasePoolIfNeeded(),this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null},_resetAverage:function(){this._physicalAverage=0,this._physicalAverageCount=0},_resizeHandler:function(){t&&Math.abs(this._viewportHeight-this._scrollTargetHeight),Polymer.dom.addDebouncer(this.debounce("_debounceTemplate",function(){this.updateViewportBoundaries(),this._render(),this._itemsRendered&&this._physicalItems&&this._isVisible&&(this._resetAverage(),this.scrollToIndex(this.firstVisibleIndex))}.bind(this),1))},updateSizeForItem:function(t){var i=this._physicalIndexForKey[t];null!=i&&(this._updateMetrics([i]),this._positionItems())},_isIndexRendered:function(t){return t>=this._virtualStart&&t<=this._virtualEnd},_isIndexVisible:function(t){return t>=this.firstVisibleIndex&&t<=this.lastVisibleIndex}}}(),vaadin.elements.grid.IronListBehavior=[Polymer.Templatizer,Polymer.IronScrollTargetBehavior,vaadin.elements.grid.IronListBehaviorImpl];</script><dom-module id="vaadin-grid-table-styles" assetpath="../../../../bower_components/vaadin-grid/"><template><style>@keyframes appear{to{opacity:1}}:host{display:block;position:relative;animation:1ms appear}@media only screen and (-webkit-max-device-pixel-ratio:1){:host{will-change:transform}}#items{position:relative}#fixedsizer,#items,#outersizer{border-top:0 solid transparent;border-bottom:0 solid transparent}:host(:not([grid])) #items>::content>*{width:100%}#items>tr{box-sizing:border-box;margin:0;position:absolute}table{height:100%;width:100%;display:block;overflow:auto;box-sizing:border-box}[overflow-hidden]{overflow:hidden}tbody{display:block}tfoot td,thead th{top:0}.vaadin-grid-cell{padding:0;flex-shrink:0;flex-grow:1;box-sizing:border-box;display:flex}.vaadin-grid-cell:not([detailscell]){position:relative}.vaadin-grid-cell ::content>vaadin-grid-cell-content{width:100%;display:inline-flex;justify-content:center;flex-direction:column;white-space:nowrap;overflow:hidden}.vaadin-grid-column-resize-handle{position:absolute;right:0;height:100%;cursor:col-resize;z-index:1}.vaadin-grid-column-resize-handle::before{position:absolute;content:"";height:100%;width:35px;transform:translateX(-50%)}[last-frozen] .vaadin-grid-column-resize-handle::before,[lastcolumn] .vaadin-grid-column-resize-handle::before{width:18px;transform:translateX(-100%)}:host([column-reordering-allowed]) #header,:host([column-resizing]){-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;user-select:none}:host([column-resizing]){cursor:col-resize}:host([ios][column-resizing]) #outerscroller{overflow:hidden}tr:not([hidden]){display:flex;width:100%}[frozen]{z-index:2}[hidden]{display:none}caption{position:absolute;display:block;padding:0;width:100%;z-index:-100}::content>vaadin-grid-column,::content>vaadin-grid-column-group,::content>vaadin-grid-selection-column{display:none}:host([no-content-pointer-events]) .vaadin-grid-cell ::content>vaadin-grid-cell-content{pointer-events:none}#reorderghost{visibility:hidden;position:fixed;opacity:.5;pointer-events:none}:host([copying]) tr{opacity:0!important;position:static!important;display:table-row!important}:host([copying]) .vaadin-grid-cell{display:table-cell!important}</style></template></dom-module><dom-module id="vaadin-grid-table-themability-styles" assetpath="../../../../bower_components/vaadin-grid/"><template><style>thead tr:last-child th ::content>vaadin-grid-cell-content{border-bottom:1px solid var(--divider-color,rgba(0,0,0,.08))}tfoot tr:first-child td ::content>vaadin-grid-cell-content{border-top:1px solid var(--divider-color,rgba(0,0,0,.08))}tbody tr:not([lastrow]) td ::content>vaadin-grid-cell-content{border-bottom:1px solid var(--divider-color,rgba(0,0,0,.08))}[last-frozen] ::content>vaadin-grid-cell-content{border-right:1px solid var(--divider-color,rgba(0,0,0,.08))}.vaadin-grid-column-resize-handle{border-right:1px solid var(--divider-color,rgba(0,0,0,.08));@apply (--vaadin-grid-column-resize-handle);}table tr .vaadin-grid-cell:not([detailscell]) ::content>vaadin-grid-cell-content{background:#fff;text-align:left;padding:8px;box-sizing:border-box;@apply (--vaadin-grid-cell);}table thead .vaadin-grid-cell:not([detailscell]) ::content>vaadin-grid-cell-content{font-weight:500;@apply (--vaadin-grid-header-cell);}table tfoot .vaadin-grid-cell:not([detailscell]) ::content>vaadin-grid-cell-content{font-weight:500;@apply (--vaadin-grid-footer-cell);}table tbody .vaadin-grid-cell:not([detailscell]) ::content>vaadin-grid-cell-content{@apply (--vaadin-grid-body-cell);}tbody [odd] .vaadin-grid-cell:not([detailscell]) ::content>vaadin-grid-cell-content{@apply (--vaadin-grid-body-row-odd-cell);}table tr .vaadin-grid-cell:not([detailscell])[last-frozen] ::content>vaadin-grid-cell-content{@apply (--vaadin-grid-cell-last-frozen);}:host(:not([scrolling])) tbody tr:hover .vaadin-grid-cell ::content>vaadin-grid-cell-content{@apply (--vaadin-grid-body-row-hover-cell);}table tr .vaadin-grid-cell.vaadin-grid-cell[lastcolumn] ::content>vaadin-grid-cell-content{border-right:none}</style></template></dom-module><dom-module id="vaadin-grid-table" assetpath="../../../../bower_components/vaadin-grid/"><template><style include="vaadin-grid-table-scroll-styles"></style><style include="vaadin-grid-row-details-styles"></style><style include="vaadin-grid-table-styles"></style><style include="vaadin-grid-table-themability-styles"></style><style include="vaadin-grid-selection-themability-styles"></style><style include="vaadin-grid-navigation-themability-styles"></style><style include="vaadin-grid-active-item-themability-styles"></style><style include="vaadin-grid-data-provider-themability-styles"></style><style include="vaadin-grid-row-details-themability-styles"></style><style include="vaadin-grid-column-reordering-themability-styles"></style><vaadin-grid-table-focus-trap id="headerFocusTrap" on-focus="_onHeaderFocus" on-focusin="_onHeaderFocus" on-focusout="_onFocusout"></vaadin-grid-table-focus-trap><content select="#headerFocusTrap"></content><vaadin-grid-table-focus-trap id="bodyFocusTrap" on-focus="_onBodyFocus" on-focusin="_onBodyFocus" on-focusout="_onFocusout"></vaadin-grid-table-focus-trap><content select="#bodyFocusTrap"></content><content select="vaadin-grid-column, vaadin-grid-selection-column, vaadin-grid-column-group"></content><div id="spinner"></div><table id="table" overflow-hidden$="[[_hideTableOverflow(scrollbarWidth, safari)]]"><caption><div id="fixedsizer" is="vaadin-grid-sizer" top="[[_estScrollHeight]]" column-tree="[[columnTree]]"></div></caption><thead id="header" target="[[target]]" is="vaadin-grid-table-header" column-tree="[[columnTree]]"></thead><tbody id="items" is="vaadin-grid-table-body"></tbody><tfoot id="footer" target="[[target]]" is="vaadin-grid-table-footer" column-tree="[[columnTree]]"></tfoot></table><vaadin-grid-table-outer-scroller id="outerscroller" scroll-target="[[scrollTarget]]" overflow-hidden$="[[_hideOuterScroller(scrollbarWidth, safari)]]" ios$="[[ios]]" scrolling$="[[scrolling]]"><div id="outersizer" is="vaadin-grid-sizer" top="[[_estScrollHeight]]" column-tree="[[columnTree]]"></div></vaadin-grid-table-outer-scroller><div id="reorderghost"></div><content select="#footerFocusTrap"></content><vaadin-grid-table-focus-trap id="footerFocusTrap" on-focus="_onFooterFocus" on-focusin="_onFooterFocus" on-focusout="_onFocusout"></vaadin-grid-table-focus-trap></template></dom-module><script>Polymer({is:"vaadin-grid-table",behaviors:[vaadin.elements.grid.IronListBehavior,vaadin.elements.grid.TableScrollBehavior,vaadin.elements.grid.TableKeyboardBehavior,vaadin.elements.grid.TableColumnReorderingBehavior,Polymer.Templatizer],properties:{size:Number,columnTree:Array,bindData:Function,rowDetailsTemplate:Object,columnReorderingAllowed:{type:Boolean,reflectToAttribute:!0},safari:{type:Boolean,value:/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},scrollbarWidth:{type:Number,value:function(){var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}},target:Object,hasData:Boolean},observers:["_columnTreeChanged(columnTree, _physicalItems, _physicalCountVal)","_sizeChanged(size, bindData, hasData)","_rowDetailsTemplateChanged(rowDetailsTemplate, _physicalItems, _physicalCountVal)"],listeners:{"property-changed":"_columnPropChanged",copy:"_onCopy",animationend:"_onAnimationEnd","header.column-resizing":"_onColumnResize"},_onColumnResize:function(){this.toggleAttribute("column-resizing",this.$.header.querySelector("[column-resizing]")),this._gridResizeHandler()},_onAnimationEnd:function(e){/appear/.test(e.animationName)&&(this._render(),this._updateHeaderFooterMetrics(),e.stopPropagation())},_columnPropChanged:function(e){"headerTemplate"===e.detail.path&&this.toggleAttribute("has-templates",!0,this.$.header),"footerTemplate"===e.detail.path&&this.toggleAttribute("has-templates",!0,this.$.footer),/frozen|hidden/.test(e.detail.path)&&this._frozenCellsChanged(),"hidden"===e.detail.path&&this._gridResizeHandler()},_onCopy:function(){this.safari&&(this.toggleAttribute("copying",!0),this.async(function(){this.toggleAttribute("copying",!1)},1))},_hideOuterScroller:function(e,t){return 0===e&&!t},_hideTableOverflow:function(e,t){return 0===e&&t},_rowDetailsTemplateChanged:function(t,e){e.forEach(function(e){e.rowDetailsTemplate=t})},_columnTreeChanged:function(t,e,i){this._frozenCellsChanged(),this._hasTemplatesChanged(t),e.forEach(function(e){e.columns=t[t.length-1]}),this._gridResizeHandler(),this._updateLastColumn()},_updateLastColumn:function(){Polymer.dom(this.$.table).querySelectorAll("tr").forEach(function(e){e.updateLastColumn()})},_updateHeaderFooterMetrics:function(){this._physicalSizes&&Polymer.dom.flush(),this._updateHeaderFooterMetricsSync(),Polymer.RenderStatus.afterNextRender(this.$.header,function(){this._updateHeaderFooterMetricsSync(),this._pendingScrollToScaledIndex&&this.scrollToScaledIndex(this._pendingScrollToScaledIndex)}.bind(this))},_updateHeaderFooterMetricsSync:function(){var t=this.$.header.clientHeight+"px",i=this.$.footer.clientHeight+"px";[this.$.outersizer,this.$.fixedsizer,this.$.items].forEach(function(e){e.style.borderTopWidth=t,e.style.borderBottomWidth=i})},_hasTemplatesChanged:function(e){var t=!1,i=!1;e.forEach(function(e){return e.forEach(function(e){t=t||e.headerTemplate,i=i||e.footerTemplate})}),this.toggleAttribute("has-templates",t,this.$.header),this.toggleAttribute("has-templates",i,this.$.footer)},_createPool:function(e){for(var t=new Array(e),i=0;i<e;i++){var n=document.createElement("tr","vaadin-grid-table-row");n.target=this.domHost,(t[i]=n).setAttribute("hidden",""),Polymer.dom(this.$.items).appendChild(n)}return t},_sizeChanged:function(e,t,i){var n=this._scrollTop,a=this.firstVisibleIndex+this._vidxOffset;if(this._virtualCount=Math.min(e,1e5),this._physicalIndexForKey={},this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this._vidxOffset=0,!this._physicalItems){this._physicalCount=Math.max(1,Math.min(25,this._virtualCount)),this._physicalItems=this._createPool(this._physicalCount),this._physicalSizes=new Array(this._physicalCount)}this._itemsRendered=!1,this._debounceTemplate(function(){this._render(),this._viewportHeight&&(this.scrollToScaledIndex(Math.min(a,this.size)),this._scrollTop=n,this._scrollHandler(),this.flushDebouncer("vaadin-grid-scrolling"))})},_assignModels:function(e){this._virtualIndexToItem=this._virtualIndexToItem||{},this._iterateItems(function(e,t){var i=this._physicalItems[e];i.index&&delete this._virtualIndexToItem[i.index],i.index=t+this._vidxOffset,(this._virtualIndexToItem[i.index]=i).toggleAttribute("odd",i.index%2),i.toggleAttribute("lastrow",i.index===this.size-1),i.toggleAttribute("hidden",i.index>=this.size),this.bindData(i.index,i)},e)},_gridResizeHandler:function(){this._updateHeaderFooterMetrics(),this._physicalSizes&&(this._physicalItems.forEach(function(e){e.updateRowDetailsCellMetrics()}),this.debounce("vaadin-grid-resizing",function(){this._update()}.bind(this),1))}});</script><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.ColumnBaseBehavior={properties:{resizable:{type:Boolean,value:function(){if("vaadin-grid-column-group"!==this.localName){var e=Polymer.dom(this).parentNode;return e&&"vaadin-grid-column-group"===e.localName&&e.resizable||!1}}},headerTemplate:{type:Object,value:function(){return this._findTemplate("template.header")||null}},footerTemplate:{type:Object,value:function(){return this._findTemplate("template.footer")||null}},frozen:{type:Boolean,notify:!0,value:!1},hidden:{type:Boolean,notify:!0},_lastFrozen:{type:Boolean,notify:!0,value:!1},_order:Number,_reorderStatus:Boolean},observers:["_footerTemplateChanged(footerTemplate)","_headerTemplateChanged(headerTemplate)","_lastFrozenChanged(_lastFrozen)"],_selectFirstTemplate:function(e){return Polymer.dom(this).querySelectorAll(e).filter(function(e){return e.parentElement===this}.bind(this))[0]},_findTemplate:function(e){var t=this._selectFirstTemplate(e);return t&&this.dataHost&&(t._rootDataHost=this.dataHost._rootDataHost||this.dataHost),t},_headerTemplateChanged:function(e){if(e){var t=new vaadin.elements.grid.Templatizer(this.dataHost);t._instanceProps={},t.template=e}this.fire("property-changed",{path:"headerTemplate",value:e})},_footerTemplateChanged:function(e){if(e){var t=new vaadin.elements.grid.Templatizer(this.dataHost);t._instanceProps={},t.template=e}this.fire("property-changed",{path:"footerTemplate",value:e})},_flexGrowChanged:function(e){this.fire("property-changed",{path:"flexGrow",value:e})},_widthChanged:function(e){this.fire("property-changed",{path:"width",value:e})},_lastFrozenChanged:function(e){this.fire("property-changed",{path:"lastFrozen",value:e})}},vaadin.elements.grid.ColumnBehaviorImpl={properties:{width:{type:String,value:"100px"},flexGrow:{type:Number,value:1},template:{type:Object,value:function(){return this._findTemplate("template:not(.header):not(.footer)")}}},observers:["_flexGrowChanged(flexGrow)","_widthChanged(width)","_templateChanged(template)","_frozenChanged(frozen, isAttached)","_hiddenChanged(hidden)","_orderChanged(_order)","_reorderStatusChanged(_reorderStatus)","_resizableChanged(resizable)"],_frozenChanged:function(e,t){t&&this.fire("property-changed",{path:"frozen",value:e})},_templateChanged:function(e){var t=new vaadin.elements.grid.Templatizer(this.dataHost);Polymer.dom(this.root).appendChild(t),t.template=e,this.fire("property-changed",{path:"template",value:e},{bubbles:!1})},_hiddenChanged:function(e){this.fire("property-changed",{path:"hidden",value:e})},_orderChanged:function(e){this.fire("property-changed",{path:"order",value:e})},_reorderStatusChanged:function(e){this.fire("property-changed",{path:"reorderStatus",value:e})},_resizableChanged:function(e){this.fire("property-changed",{path:"resizable",value:e})}},vaadin.elements.grid.ColumnBehavior=[vaadin.elements.grid.ColumnBaseBehavior,vaadin.elements.grid.ColumnBehaviorImpl];</script><dom-module id="vaadin-grid-column" assetpath="../../../../bower_components/vaadin-grid/"><script>Polymer({is:"vaadin-grid-column",behaviors:[vaadin.elements.grid.ColumnBehavior]});</script></dom-module><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.ArrayDataProviderBehavior={properties:{items:Array},observers:["_itemsChanged(items, items.*)"],_itemsChanged:function(e,t){this.size=(e||[]).length,this.dataProvider=this.dataProvider||this._arrayDataProvider,this.clearCache()},_arrayDataProvider:function(e,t){var i=(this.items||[]).slice(0);this._checkPaths(this._filters,"filtering",i)&&(i=this._filter(i)),this.size=i.length,e.sortOrders.length&&this._checkPaths(this._sorters,"sorting",i)&&(i=i.sort(this._multiSort.bind(this)));var r=e.page*e.pageSize,a=r+e.pageSize;t(i.slice(r,a),i.length)},_checkPaths:function(e,t,i){if(!i.length)return!1;var r=!0;for(var a in e){var n=e[a].path;if(n&&-1!==n.indexOf(".")){var s=n.replace(/\.[^\.]*/,"");void 0===Polymer.Base.get(s,i[0])&&(console.warn('Path "'+n+'" used for '+t+" does not exist in all of the items, "+t+" is disabled."),r=!1)}}return r},_multiSort:function(t,i){return this._sorters.map(function(e){return"asc"===e.direction?this._compare(Polymer.Base.get(e.path,t),Polymer.Base.get(e.path,i)):"desc"===e.direction?this._compare(Polymer.Base.get(e.path,i),Polymer.Base.get(e.path,t)):0},this).reduce(function(e,t){return e||t},0)},_normalizeEmptyValue:function(e){return 0<=[void 0,null].indexOf(e)?"":isNaN(e)?e.toString():e},_compare:function(e,t){return(e=this._normalizeEmptyValue(e))<(t=this._normalizeEmptyValue(t))?-1:t<e?1:0},_filter:function(e){return e.filter(function(t,e){return 0===this._filters.filter(function(e){return-1===this._normalizeEmptyValue(Polymer.Base.get(e.path,t)).toString().toLowerCase().indexOf(e.value.toString().toLowerCase())}.bind(this)).length},this)}};</script><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.DynamicColumnsBehavior={ready:function(){this._addNodeObserver()},_hasColumnGroups:function(e){for(var r=0;r<e.length;r++)if("vaadin-grid-column-group"===e[r].localName)return!0;return!1},_childrenColumns:function(e){return e.map(function(e){return"vaadin-grid-column-group"!==e.localName?[e]:Polymer.dom(e).children.filter(function(e){return/^vaadin-grid-(column|selection)/.test(e.localName)})}).reduce(function(e,r){return e.concat(r)},[])},_getColumnTree:function(){for(var e=[],r=this.queryAllEffectiveChildren("vaadin-grid-column, vaadin-grid-column-group, vaadin-grid-selection-column");e.push(r),this._hasColumnGroups(r);)r=this._childrenColumns(r);return e},_updateColumnTree:function(){var e=this._getColumnTree();this._arrayEquals(e,this._columnTree)||(this._columnTree=e)},_addNodeObserver:function(){this._observer=Polymer.dom(this).observeNodes(function(e){function r(e){return e.nodeType===Node.ELEMENT_NODE&&/^vaadin-grid-(column|selection)/i.test(e.localName)}(0<e.addedNodes.filter(r).length||0<e.removedNodes.filter(r).length)&&this._updateColumnTree(),Polymer.Settings.useNativeShadow&&(Polymer.dom(this).insertBefore(this.$.scroller.$.bodyFocusTrap,Polymer.dom(this).firstElementChild),Polymer.dom(this).insertBefore(this.$.scroller.$.headerFocusTrap,Polymer.dom(this).firstElementChild),Polymer.dom(this).appendChild(this.$.scroller.$.footerFocusTrap)),this.debounce("check-imports",this._checkImports,2e3)}.bind(this))},_arrayEquals:function(e,r){if(!e||!r||e.length!=r.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]instanceof Array&&r[n]instanceof Array){if(!this._arrayEquals(e[n],r[n]))return!1}else if(e[n]!=r[n])return!1;return!0},_checkImports:function(){["vaadin-grid-column-group","vaadin-grid-sorter","vaadin-grid-filter","vaadin-grid-selection-column"].forEach(function(e){var r=Polymer.dom(this).querySelector(e);r&&!Polymer.isInstance(r)&&console.warn("Make sure you have imported the required module for <"+e+"> element.")},this)}};</script><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.SortBehavior={properties:{multiSort:{type:Boolean,value:!1},_sorters:{type:Array,value:function(){return[]}},_previousSorters:{type:Array,value:function(){return[]}}},listeners:{"sorter-changed":"_onSorterChanged"},_onSorterChanged:function(r){var t=r.target;this._removeArrayItem(this._sorters,t),t._order=null,this.multiSort?(t.direction&&this._sorters.unshift(t),this._sorters.forEach(function(r,t){r._order=1<this._sorters.length?t:null},this)):(this._sorters.forEach(function(r){r._order=null,r.direction=null}),t.direction&&(this._sorters=[t])),r.stopPropagation(),this.dataProvider&&JSON.stringify(this._previousSorters)!==JSON.stringify(this._mapSorters())&&this.clearCache(),this._previousSorters=this._mapSorters()},_mapSorters:function(){return this._sorters.map(function(r){return{path:r.path,direction:r.direction}})},_removeArrayItem:function(r,t){var e=r.indexOf(t);-1<e&&r.splice(e,1)}};</script><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.FilterBehavior={properties:{_filters:{type:Array,value:function(){return[]}}},listeners:{"filter-changed":"_filterChanged"},_filterChanged:function(e){-1===this._filters.indexOf(e.target)&&this._filters.push(e.target),e.stopPropagation(),this.dataProvider&&this.clearCache()},_mapFilters:function(){return this._filters.map(function(e){return{path:e.path,value:e.value}})}};</script><dom-module id="vaadin-grid" assetpath="../../../../bower_components/vaadin-grid/"><template><style>:host{display:block;height:400px;background:var(--primary-background-color,#fff);box-sizing:border-box;border:1px solid var(--divider-color,rgba(0,0,0,.08));-webkit-tap-highlight-color:transparent}:host(:focus){outline:0}#scroller{height:100%;width:100%}</style><vaadin-grid-table id="scroller" loading$="[[_loading]]" bind-data="[[_bindData]]" size="[[size]]" column-tree="[[_columnTree]]" content-target="[[_getContentTarget()]]" row-details-template="[[_rowDetailsTemplate]]" column-reordering-allowed="[[columnReorderingAllowed]]"><content></content></vaadin-grid-table></template></dom-module><script>Polymer({is:"vaadin-grid",properties:{_columnTree:{type:Array,notify:!0},size:Number,_rowDetailsTemplate:Object,_bindData:{type:Object,value:function(){return this._getItem.bind(this)}}},behaviors:[Polymer.IronA11yKeysBehavior,Polymer.IronResizableBehavior,vaadin.elements.grid.ActiveItemBehavior,vaadin.elements.grid.RowDetailsBehavior,vaadin.elements.grid.DataProviderBehavior,vaadin.elements.grid.DynamicColumnsBehavior,vaadin.elements.grid.ArrayDataProviderBehavior,vaadin.elements.grid.SelectionBehavior,vaadin.elements.grid.SortBehavior,vaadin.elements.grid.FilterBehavior,vaadin.elements.grid.KeyboardNavigationBehavior,vaadin.elements.grid.ColumnReorderingBehavior],listeners:{"property-changed":"_columnPropChanged","iron-resize":"_gridResizeHandler"},_updateItem:function(e,i){e.style.minHeight=i?"":this.$.scroller._physicalAverage+"px",e.item=i,e.selected=this._isSelected(i),e.expanded=this._isExpanded(i),e.active=null!==i&&i==this.activeItem,e.focused=e.index===this.$.scroller.$.items._focusedRowIndex},_getContentTarget:function(){return this},ready:function(){this._updateColumnTree(),this._rowDetailsTemplate=Polymer.dom(this).querySelector("template.row-details")||void 0,this.$.scroller.target=this,null===document.doctype&&console.warn('<vaadin-grid> requires the "standards mode" declaration. Please add <!DOCTYPE html> to the HTML document.')},_columnPropChanged:function(e){"_childColumns"===e.detail.path&&this._updateColumnTree(),e.stopPropagation()},_gridResizeHandler:function(){this.$.scroller._gridResizeHandler()}});</script><dom-module id="lme-serviceobjects-history" assetpath="../lme-serviceobjects-history/"><template><style include="app-theme iron-flex iron-flex-alignment">:host{display:block}vaadin-grid{border:none}.empty-message{text-align:center}</style><app-request-error><iron-ajax id="historiesReq" url="[[historiesUrl]]" handle-as="json" last-response="{{histories}}" loading="{{loading}}" debounce-duration="[[config.api.debounce]]" bubbles=""></iron-ajax></app-request-error><div hidden="[[!_isEmpty(empty,loading)]]" class="empty-message">{{__('lme-serviceobjects-history.noItems')}}</div><vaadin-grid items="[[histories]]" hidden="[[_isEmpty(empty,loading)]]"><vaadin-grid-column width="50px" flex-grow="0"><template class="header"></template><template><div hidden="[[!item.CLID]]"><a href$="[[_getChecklistUrl(item.CLID)]]" target="_blank"><iron-icon icon="image:picture-as-pdf"></iron-icon></a></div><div hidden="[[item.CLID]]"><iron-icon icon="image:picture-as-pdf" style="opacity:.5"></iron-icon></div></template></vaadin-grid-column><vaadin-grid-column><template class="header">{{__('lme-serviceobjects-history.contract')}}</template><template>[[_getContractNumber(item.CONTRACTMAINTENANCELINEID)]]</template></vaadin-grid-column><vaadin-grid-column><template class="header">{{__('lme-serviceobjects-history.scheduled')}}</template><template>[[_getFormatedPeriod(item.PERIODPLANNED)]]</template></vaadin-grid-column><vaadin-grid-column><template class="header">{{__('lme-serviceobjects-history.executed')}}</template><template>[[_getFormatedPeriod(item.PERIODCONDUCTED)]]</template></vaadin-grid-column><vaadin-grid-column><template class="header">{{__('lme-serviceobjects-history.workbook')}}</template><template>[[item.WORKORDERID]]</template></vaadin-grid-column><vaadin-grid-column><template class="header">{{__('lme-serviceobjects-history.checklist')}}</template><template>[[item.CLID]]</template></vaadin-grid-column></vaadin-grid></template><script>Polymer({is:"lme-serviceobjects-history",behaviors:[App.LocalizeBehavior,App.ConfigBehavior],properties:{serviceId:String,histories:Array,historiesUrl:{type:String,value:function(){return App.Config.api.base+App.Config.api.endpoints.ServiceObjectHistory}},loading:{type:Boolean,value:!1,notify:!0},empty:{type:Boolean,value:!1,notify:!0},count:{type:Number,value:0,notify:!0}},observers:["_serviceIdChanged(serviceId)"],listeners:{"historiesReq.response":"_onResponseListener"},_serviceIdChanged:function(e){e&&(this.$.historiesReq.set("params",{SERVICEOBJECTID:e}),this.set("count",0),this.$.historiesReq.generateRequest())},_onResponseListener:function(e){e.detail.response.length?this.set("count",e.detail.response.length):this.set("count",0),this.empty=!e.detail.response||!e.detail.response.length},_isEmpty:function(e,t){return e&&!t},_getChecklistUrl:function(e){var t=this.config.api.base+BBX.URL.buildRestPath(this.config.api.endpoints.Checklist,{id:e,fname:"checklist.pdf"});return BBX.URL.addQueryArgs(t,{_FIELDSEL:"FILENAME,FILEBLOB",_blobname:"FILENAME",_blobdata:"FILEBLOB",_TOKEN:App.Auth.getToken()})},_getContractNumber:function(e){return e?e.substring(0,5)+"/"+e.substring(16,20):""},_getFormatedPeriod:function(e){return e&&0<e.length?e.substring(0,4)+"-"+e.substring(4,6):""}});</script></dom-module><dom-module id="lme-serviceobjects-calls" assetpath="../lme-serviceobjects-calls/"><template><style include="app-theme iron-flex iron-flex-alignment">:host{display:block}vaadin-grid{border:none}.empty-message{text-align:center}</style><iron-location query="{{query}}"></iron-location><iron-query-params params-string="{{query}}" params-object="{{queryParams}}"></iron-query-params><app-request-error><iron-ajax id="callsReq" url="[[callsUrl]]" handle-as="json" last-response="{{calls}}" loading="{{loading}}" debounce-duration="[[config.api.debounce]]" bubbles=""></iron-ajax></app-request-error><div hidden="[[!_isEmpty(empty,loading)]]" class="empty-message">{{__('lme-serviceobjects-calls.noItems')}}</div><vaadin-grid items="[[calls]]" hidden="[[_isEmpty(empty,loading)]]"><vaadin-grid-column width="50px" flex-grow="0"><template class="header"></template><template><paper-icon-button icon="editor:mode-edit" on-tap="_onCallEditListener"></paper-icon-button></template></vaadin-grid-column><vaadin-grid-column><template class="header">#</template><template>[[item.CALLID]]</template></vaadin-grid-column><vaadin-grid-column><template class="header">{{__('lme-serviceobjects-calls.desc')}}</template><template><div>[[item.DESC]]</div><div>[[item.CALLTYPEDESC]] / [[item.CALLPRIORITYDESC]]</div></template></vaadin-grid-column><vaadin-grid-column><template class="header">{{__('lme-serviceobjects-calls.status')}}</template><template><div>[[item.REGISTEREDBYCONTACTDESC]]</div><div>[[item.STATUSDESC]]</div></template></vaadin-grid-column></vaadin-grid></template><script>Polymer({is:"lme-serviceobjects-calls",behaviors:[App.LocalizeBehavior,App.ConfigBehavior],properties:{query:String,queryParams:Object,serviceId:String,calls:Array,callsUrl:{type:String,value:function(){return App.Config.api.base+BBX.URL.buildRestPath(App.Config.api.endpoints.ServiceCalls,{id:""})}},loading:{type:Boolean,value:!1,notify:!0},empty:{type:Boolean,value:!1},count:{type:Number,value:0,notify:!0}},observers:["_serviceIdChanged(serviceId)"],listeners:{"callsReq.response":"_onResponseListener"},_serviceIdChanged:function(e){e&&(this.$.callsReq.set("params",{SERVICEOBJECTID:e}),this.set("count",0),this.$.callsReq.generateRequest())},_onResponseListener:function(e){e.detail.response.length?this.set("count",e.detail.response.length):this.set("count",0),this.empty=!e.detail.response||!e.detail.response.length},_isEmpty:function(e,s){return e&&!s},_onCallEditListener:function(e){var s=this.config.api,i="/grid/"+s.BCNameMapping.ServiceCalls+"/form",t=JSON.parse(JSON.stringify(this.queryParams));this.fire("switch-to",[i,Object.assign(t,{_id:e.model.item[s.BCIDValueMapping.ServiceCalls],_bc:"ServiceCalls"})])}});</script></dom-module><dom-module id="lme-serviceobjects-validator" assetpath="../lme-serviceobjects-validator/"><template><style>:host{display:block}</style><app-request-error><app-resturl url="{{_url}}" endpoint="ServiceObjects" query-object="{&quot;_FIELDSEL&quot;: &quot;INSTALLADDRID,CUSTOMERID,OBJECTTYPEID&quot;}" rest-object="[[_restObject]]"></app-resturl><iron-ajax id="request" url="[[_url]]" handle-as="json" last-response="{{result}}" loading="{{loading}}" debounce-duration="[[config.api.debounce]]" bubbles=""></iron-ajax></app-request-error></template><script>Polymer({is:"lme-serviceobjects-validator",behaviors:[App.ConfigBehavior],properties:{value:{type:String,value:""},customerId:{type:String,value:""},loginCustomerIds:{type:String,value:""},result:{type:Array,value:[]},invalid:{type:Boolean,notify:!0},loading:{type:Boolean,value:!1,notify:!0},disabled:{type:Boolean,value:!1},_restObject:Object},observers:["_valueChanged(disabled,value,customerId,loginCustomerIds)"],_valueChanged:function(e,t,i,s){e?this.set("invalid",!1):t&&(i&&s?this.debounce("lme-serviceobjects-validator#_valueChanged",function(){this.set("_restObject",{id:t}),this.$.request.generateRequest().completes.then(function(e){var t=e.response;t&&t.length?"1"!=t[0].OBJECTTYPEID?this.set("invalid",!0):t[0].CUSTOMERID!=s.slice(0,-1)?this.set("invalid",!0):t[0].hasOwnProperty("INSTALLADDRID")&&t[0].INSTALLADDRID!=i&&null!=t[0].INSTALLADDRID&&""!=t[0].INSTALLADDRID?this.set("invalid",!0):this.set("invalid",!1):this.set("invalid",!0)}.bind(this))}.bind(this),this.config.api.debounce):this.set("invalid",!0))}});</script></dom-module></div><dom-module id="lme-serviceobjects-form"><template><style include="app-theme lme-shared-style iron-flex iron-flex-alignment">:host{display:block}#form paper-checkbox{pointer-events:none}vaadin-date-picker{padding-bottom:8px}.min-width{min-width:300px}</style><iron-location query="{{query}}"></iron-location><iron-query-params params-string="{{query}}" params-object="{{queryParams}}"></iron-query-params><app-request-error><app-resturl url="{{entityUrl}}" endpoint="ServiceObjects" rest-object="[[entityReqRestObject]]"></app-resturl><iron-ajax id="entityReq" url="[[entityUrl]]?_FIELDSEL=OBJECTTYPEDESC,INSTALLADDRDESC,NSTALLADDRZIP,LOCATION,PROPERTY,OPERATINGHOURS,SOFTWAREVERSION,ROOMDESC&amp;_SCOPE=D" handle-as="json" last-response="{{entityReqResult}}" loading="{{loadingForm}}" content-type="application/json" debounce-duration="[[config.api.debounce]]" bubbles=""></iron-ajax><app-resturl url="{{statusesUrl}}" endpoint="ServiceObjectsLookup" rest-object="{&quot;entity&quot;: &quot;STATUSID&quot;}"></app-resturl><iron-ajax id="statusesReq" url="[[statusesUrl]]" handle-as="json" last-response="{{statusesReqResult}}" loading="{{loadingForm}}" debounce-duration="[[config.api.debounce]]" bubbles=""></iron-ajax></app-request-error><div class="collapse-container"><paper-collapse-group class="full"><paper-collapse-item id="details-collapse" icon="icons:description" header="{{__('lme-serviceobjects-form.details')}}" opened=""><div id="form" class="content"><spinner-backdrop loading="[[loadingForm]]"></spinner-backdrop><div class="layout horizontal wrap"><div class="flex"><lme-serviceobjects-validator value="[[entity.SERVICEOBJECTID]]" customer-id="[[params.customerId]]" login-customer-ids="[[params.loginCustomerIds]]" invalid="{{objectnoInvalid}}" loading="[[invalid]]" disabled="[[params.ISUPDATE]]" always-float-label=""></lme-serviceobjects-validator><paper-input id="objectno" class="min-width" label="{{__('lme-serviceobjects-form.objectno')}}" value="{{entity.SERVICEOBJECTID}}" readonly="[[params.ISUPDATE]]" type="number" disabled="[[loadingForm]]" required="" invalid="[[objectnoInvalid]]" always-float-label=""></paper-input><paper-input class="min-width" label="{{__('lme-serviceobjects-form.desc')}}" value="{{entity.DESCRIPTION1}}" readonly="[[params.ISUPDATE]]" disabled="[[loadingForm]]" always-float-label=""></paper-input><paper-input class="min-width" label="{{__('lme-serviceobjects-form.location')}}" value="{{entity.INSTALLADDRDESC}}" readonly="[[params.ISUPDATE]]" hidden$="[[!params.ISUPDATE]]" disabled="[[loadingForm]]" always-float-label=""></paper-input><paper-input class="min-width" label="{{__('lme-serviceobjects-form.manufacturer')}}" value="{{entity.MANUFACTURER}}" readonly="[[params.ISUPDATE]]" disabled="[[loadingForm]]" always-float-label=""></paper-input><paper-input class="min-width" label="{{__('lme-serviceobjects-form.type')}}" value="{{entity.DESCRIPTION2}}" readonly="[[params.ISUPDATE]]" disabled="[[loadingForm]]" always-float-label=""></paper-input><paper-input class="min-width" label="{{__('lme-serviceobjects-form.serialno')}}" value="{{entity.SERIALNUMBER}}" readonly="[[params.ISUPDATE]]" disabled="[[loadingForm]]" always-float-label=""></paper-input><paper-input class="min-width" label="{{__('lme-serviceobjects-form.yourObjectno')}}" value="{{entity.CUSTOMEROBJECT}}" readonly="[[params.ISUPDATE]]" disabled="[[loadingForm]]" always-float-label=""></paper-input></div><div class="flex"><vaadin-combo-box class="min-width auto-validate" label="{{__('lme-servicecalls-form.status')}}" item-label-path="DESC" item-value-path="STATUSID" items="[[statusesReqResult]]" value="{{entity.STATUSID}}" loading="[[loadingForm]]" hidden$="[[!params.ISUPDATE]]" disabled="[[loadingForm]]" readonly="[[params.ISUPDATE]]"><div class="clear-button" style="display:none" always-float-label="" prevent-invalid-input="" auto-validate="" required=""></div></vaadin-combo-box><div class="layout horizontal wrap min-width"><paper-input class="flex" label="{{__('lme-serviceobjects-form.location')}}" value="[[entity.LOCATION]]" readonly="[[params.ISUPDATE]]" hidden$="[[!params.ISUPDATE]]" always-float-label=""></paper-input><paper-input class="flex" label="{{__('lme-serviceobjects-form.workingHours')}}" value="[[entity.OPERATINGHOURS]]" readonly="[[params.ISUPDATE]]" hidden$="[[!params.ISUPDATE]]" always-float-label=""></paper-input></div><div class="layout horizontal wrap min-width"><paper-input class="flex" label="{{__('lme-serviceobjects-form.softwareVersion')}}" value="[[entity.SOFTWAREVERSION]]" readonly="[[params.ISUPDATE]]" hidden$="[[!params.ISUPDATE]]" always-float-label=""></paper-input><paper-input class="flex" label="{{__('lme-serviceobjects-form.property')}}" value="[[entity.PROPERTY]]" readonly="[[params.ISUPDATE]]" hidden$="[[!params.ISUPDATE]]" always-float-label=""></paper-input></div><vaadin-date-picker class="min-width" label="{{__('lme-serviceobjects-form.installationDate')}}" placeholder="{{__('lme-serviceobjects-form.installationDate.placholder')}}" value="{{entity.INST_DT}}" i18n="[[dateI18n]]" readonly="[[params.ISUPDATE]]" disabled="[[loadingForm]]" always-float-label=""></vaadin-date-picker><paper-input class="min-width" label="{{__('lme-serviceobjects-form.space')}}" value="{{entity.ROOMDESC}}" disabled="[[loadingForm]]" readonly="[[params.ISUPDATE]]" always-float-label=""></paper-input><paper-input class="min-width" label="{{__('lme-serviceobjects-form.price')}}" value="{{entity.PURCHASEPRICE}}" readonly="[[params.ISUPDATE]]" disabled="[[loadingForm]]" auto-validate="" pattern="(?:\d{1,5}|\d{1,5}\.\d{1,2})" always-float-label=""></paper-input><paper-input class="min-width" label="{{__('lme-serviceobjects-form.maintenance')}}" value="{{entity.MAINTENANCENEXTMONTH}}" readonly="[[params.ISUPDATE]]" disabled="[[loadingForm]]" hidden$="[[!params.ISUPDATE]]" always-float-label=""></paper-input></div></div><div class="layout horizontal wrap"><div class="flex"><paper-textarea class="flex" label="{{__('lme-serviceobjects-form.remarks')}}" hidden$="[[params.ISUPDATE]]" max-rows="3" value="{{entity.REMARKS}}" always-float-label=""></paper-textarea></div></div><div class="layout horizontal wrap center"><div class="flex"><paper-checkbox checked="[[entity.INCONTRACT]]">{{__('lme-serviceobjects-form.incontract')}}</paper-checkbox></div><paper-button class="button" data-operation="update" disabled="[[_isButtonDisabled(changed,loadingForm,invalid,objectnoInvalid)]]" on-tap="_onUpdateCreateListener" hidden="[[!params.ISUPDATE]]" raised="">{{__('lme-serviceobjects-form.update')}}</paper-button><paper-button class="button" data-operation="create" disabled="[[_isButtonDisabled(changed,loadingForm,invalid,objectnoInvalid)]]" on-tap="_onUpdateCreateListener" hidden="[[params.ISUPDATE]]" raised="">{{__('lme-serviceobjects-form.create')}}</paper-button></div></div></paper-collapse-item><paper-collapse-item hidden$="[[!params.ISUPDATE]]" icon="icons:history" header="{{__('lme-serviceobjects-form.history')}}"><div class="content"><spinner-backdrop loading="[[loadingHistory]]"></spinner-backdrop><lme-serviceobjects-history loading="{{loadingHistory}}" service-id="[[params.id]]" language="{{language}}" languages="{{languages}}" count="{{historiesCount}}"></lme-serviceobjects-history></div><div slot="buttons"><div class="badge">[[historiesCount]]</div></div></paper-collapse-item><paper-collapse-item hidden$="[[!params.ISUPDATE]]" icon="communication:call" header="{{__('lme-serviceobjects-form.calls')}}"><div class="content"><spinner-backdrop loading="[[loadingCalls]]"></spinner-backdrop><lme-serviceobjects-calls loading="{{loadingCalls}}" service-id="[[params.id]]" language="{{language}}" languages="{{languages}}" count="{{serviceCallsCouns}}"></lme-serviceobjects-calls></div><div slot="buttons"><div class="badge">[[serviceCallsCouns]]</div></div></paper-collapse-item><paper-collapse-item hidden$="[[!params.ISUPDATE]]" icon="icons:attachment" header="{{__('lme-serviceobjects-form.attachments')}}"><div class="content"><spinner-backdrop loading="[[loading.archives]]"></spinner-backdrop><cp-archives loading-list="{{loading.archives}}" entity="ServiceObjects" entity-id="[[params.id]]" language="{{language}}" languages="{{languages}}" count="{{archivesCount}}"></cp-archives></div><div slot="buttons"><div class="badge">[[archivesCount]]</div></div></paper-collapse-item></paper-collapse-group></div></template><script>Polymer({is:"lme-serviceobjects-form",behaviors:[App.CP.ComponentBehavior],properties:{query:String,queryParams:Object,entity:Object,entityReqRestObject:Object,entityReqRestQueryObject:{type:Object,value:{_FIELDSEL:"LOCATION,PROPERTY,OPERATINGHOURS,SOFTWAREVERSION,ROOMDESC",_SCOPE:"D"}},entityUrl:String,entityReqResult:Array,statusesUrl:String,statusesReqResult:Array,historiesCount:Number,archivesCount:Number,serviceCallsCouns:Number,loadingForm:{type:Boolean,value:!1,notify:!0},loadingArchives:{type:Boolean,value:!1,notify:!0},loadingCalls:{type:Boolean,value:!1,notify:!0},loadingHistory:{type:Boolean,value:!1,notify:!0},invalid:{type:Boolean,value:!1,notify:!0},objectnoInvalid:{type:Boolean,value:!1,notify:!0},changed:{type:Boolean,value:!1}},observers:["_paramsChanged(params,params.*)","_queryParamsChanged(queryParams._bc,queryParams._id)"],listeners:{"entityReq.response":"_onEntityResponseListener","form.value-changed":"_validate","form.selected-item-changed":"_validate","form.change":"_validate"},_validate:function(e){var t=Polymer.dom(this.root).querySelectorAll(".auto-validate");this.changed=!0;try{for(var i in t)if("function"==typeof t[i].validate&&0==t[i].validate())return this.set("invalid",!0),!0;return this.set("invalid",!1),!1}catch(e){return!1}},_queryParamsChanged:function(t,i){if("ServiceObjects"===t){var e=this.$$("#details-collapse");e&&(e.opened=!0),this.debounce("lme-serviceobjects-form#_qureyParamsChanged",function(){var e={id:i,bc:t,customerId:this.queryParams["[[CUSTOMERID]]"],loginCustomerIds:this.queryParams["[[LOGINCUSTOMERIDS]]"],ISUPDATE:""!=i};e[this.config.api.BCIDValueMapping.ServiceObjects]=i,this.set("invalid",!e.ISUPDATE),this.set("params",e)}.bind(this),this.config.api.debounce)}},_paramsChanged:function(e){e&&Object.keys(e).length&&this.debounce("lme-serviceobjects-form#_paramsChanged",function(){this.set("entityReqRestObject",{id:e.id}),e.ISUPDATE?this.$.entityReq.generateRequest().completes.then(function(e){if(e.response)return this.$.statusesReq.generateRequest()}.bind(this)):this.entity={}}.bind(this),this.config.api.debounce)},_onEntityResponseListener:function(e){if(!e.detail.response)return!1;var t=this.config.api.BCIDValueMapping.ServiceObjects,i=_.pick(e.detail.response[0],[t,"STATUSID","DESCRIPTION1","MANUFACTURER","INST_DT","DESCRIPTION2","ROOMDESC","SERIALNUMBER","PURCHASEPRICE","CUSTOMEROBJECT","MAINTENANCENEXTMONTH","INCONTRACT","INSTALLADDRDESC","REMARKS","LOCATION","OPERATINGHOURS","SOFTWAREVERSION","PROPERTY","INSTALLADDRZIP"]);i.INST_DT=this.formatDate(i.INST_DT,this.language,"YYYY-MM-DD"),this.set("entity",i)},_onUpdateCreateListener:function(t){var i=this.config.api.BCIDValueMapping.ServiceObjects,s=this.$.entityReq,e=JSON.parse(JSON.stringify(this.entity));this.params.ISUPDATE||(e.STATUSID=1,e.INSTALLADDRID=this.params.customerId||s.lastResponse[0].customerId),(e=_.omit(e,["INCONTRACT",this.params.ISUPDATE?"INSTALLADDRDESC":"","MAINTENANCENEXTMONTH","LOCATION","OPERATINGHOURS","SOFTWAREVERSION","PROPERTY","INSTALLADDRZIP"])).INST_DT=this.formatDate(e.INST_DT,this.language,"YYYY-MM-DD"),s.set("method","POST"),s.set("body",e),s.generateRequest().completes.then(function(e){s.set("method","GET"),s.set("body",""),"create"==t.target.getAttribute("data-operation")&&this.set("queryParams._id",e.response[0][i]),this.publish("notify-grid-refresh")}.bind(this))},_isButtonDisabled:function(e,t,i,s){return!!t||(!e||(i||s))}});</script></dom-module></body></html>